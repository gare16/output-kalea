import{r as s,S as q,j as a,H as f,P as E}from"./index-ByLk8s-j.js";import{T as C}from"./TablesWidget13-CYdTlftt.js";import{D as T}from"./DynamicEditModal-Bhzcpj13.js";import{D as v}from"./DynamicDeleteModal-C1L8R17p.js";import{D as K}from"./DynamicFormModal-BoHJvk0i.js";import{u as P}from"./useMaterials-CtTrU3Ez.js";import{f as h}from"./dateFormatter-Bb4_azhc.js";import"./ThemeProvider-DRjQDZAD.js";import"./FormCheckInput-DWF_ryow.js";import"./Modal-DB3yoVLU.js";import"./hasClass-BOwTM1yB.js";import"./DataKey-jIVlRIQi.js";import"./Button-BI5PMaMy.js";import"./Form-BFxoF8LL.js";import"./warning-C3dqfjue.js";import"./useMutation-D8PU-YPJ.js";const H=[{title:"Dashboard",path:"/dashboard",isSeparator:!1,isActive:!1},{title:"Master Category",path:"/master-category",isSeparator:!0,isActive:!0}],$=()=>{const{materials:o,isLoading:M,addMaterial:y,updateMaterial:b,deleteMaterial:x}=P(),[u,n]=s.useState(!1),[_,d]=s.useState(!1),[p,m]=s.useState(!1),[t,i]=s.useState(null),{currentUser:l}=q(),g=[{key:"material_name",label:"Nama Material",className:"min-w-140px"},{key:"material_category",label:"Kategori Material",className:"min-w-120px"},{key:"unit_of_measure",label:"Unit of Measure",className:"min-w-100px"},{key:"created_by",label:"Dibuat Oleh",className:"min-w-120px"},{key:"created_dt",label:"Dibuat Tanggal",className:"min-w-140px"},{key:"changed_by",label:"Diubah Oleh",className:"min-w-120px"},{key:"changed_dt",label:"Diubah Tanggal",className:"min-w-140px"}],k=o.map(e=>({...e,created_dt:h(e.created_dt),changed_dt:e.changed_dt?h(e.changed_dt):"-",changed_by:e.changed_by||"-"})),D=()=>{n(!0)},w=e=>{y({material_name:e.material_name,material_category:e.material_category,unit_of_measure:e.unit_of_measure,is_active:e.is_active,user_id:l==null?void 0:l.full_name}),n(!1)},N=e=>{const r=o.find(c=>c.id===e.id);r&&(i(r),d(!0))},S=e=>{t&&(b({id:t.id,material:{material_name:e.material_name,material_category:e.material_category,unit_of_measure:e.unit_of_measure,user_id:l==null?void 0:l.full_name}}),d(!1),i(null))},j=e=>{const r=o.find(c=>c.id===e.id);r&&(i(r),m(!0))},A=()=>{t&&(x(t.id),m(!1),i(null))};return M?a.jsx(f,{children:a.jsxs("div",{className:"card-body text-center py-10",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("div",{className:"mt-3",children:"Memuat data material..."})]})}):a.jsxs("div",{className:"container-fluid",children:[a.jsx(E,{breadcrumbs:H,children:"Master Material"}),a.jsx(f,{children:a.jsx(C,{className:"card-xl-stretch",rows:k,columns:g,labelAdd:"Add Material",onEdit:N,onDelete:j,onAdd:D})}),u&&a.jsx(K,{show:u,title:"Tambah Material",fields:[{name:"material_code",label:"Kode Material",type:"text",required:!0,icon:"code",placeholder:"Masukkan kode material"},{name:"material_name",label:"Nama Material",type:"text",required:!0,icon:"document",placeholder:"Masukkan nama material"},{name:"material_category",label:"Kategori Material",type:"text",required:!0,icon:"tag",placeholder:"Masukkan kategori material"},{name:"unit_of_measure",label:"Unit of Measure",type:"text",required:!0,icon:"scale",placeholder:"Masukkan unit of measure"},{name:"is_active",label:"Status Aktif",type:"checkbox",required:!1,icon:"check-circle"}],onSubmit:w,onClose:()=>n(!1)}),_&&t&&a.jsx(T,{show:_,title:"Edit Material",fields:[{name:"material_code",label:"Kode Material",type:"text",required:!0,icon:"code"},{name:"material_name",label:"Nama Material",type:"text",required:!0,icon:"document"},{name:"material_category",label:"Kategori Material",type:"text",required:!0,icon:"tag"},{name:"unit_of_measure",label:"Satuan Ukuran",type:"text",required:!0,icon:"scale"}],initialData:{material_name:t.material_name,material_category:t.material_category,unit_of_measure:t.unit_of_measure},onSave:S,onClose:()=>{d(!1),i(null)}}),p&&t&&a.jsx(v,{show:p,title:"Hapus Material",itemName:t.material_name,onConfirm:A,onClose:()=>{m(!1),i(null)}})]})};export{$ as default};
