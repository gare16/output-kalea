import{r as s,a2 as q,j as a,_ as h,k as C}from"./index-BXdnQbB_.js";import{T as E}from"./TablesWidget13-CqfjLc2n.js";import{D as T}from"./DynamicEditModal-BVp1i985.js";import{a as v,D as K}from"./DynamicDeleteModal-CGetyfKf.js";import{u as L}from"./useMaterials-CNRVrbyb.js";import{f as p}from"./dateFormatter-CGxZEcZP.js";import"./ThemeProvider-BUhmALRu.js";import"./Modal-D2BAKrmG.js";import"./hasClass-Cl4BTZqK.js";import"./useMutation-qdNYSY8E.js";import"./warning-uczxBD7s.js";const O=[{title:"Dashboard",path:"/dashboard",isSeparator:!1,isActive:!1},{title:"Master Category",path:"/master-category",isSeparator:!0,isActive:!0}],U=()=>{const{materials:o,isLoading:M,addMaterial:y,updateMaterial:b,deleteMaterial:x}=L(),[u,n]=s.useState(!1),[_,d]=s.useState(!1),[f,m]=s.useState(!1),[t,i]=s.useState(null),{currentUser:l}=q(),g=[{key:"material_name",label:"Nama Material",className:"min-w-140px"},{key:"material_category",label:"Kategori Material",className:"min-w-120px"},{key:"unit_of_measure",label:"Unit of Measure",className:"min-w-100px"},{key:"created_by",label:"Dibuat Oleh",className:"min-w-120px"},{key:"created_dt",label:"Dibuat Tanggal",className:"min-w-140px"},{key:"changed_by",label:"Diubah Oleh",className:"min-w-120px"},{key:"changed_dt",label:"Diubah Tanggal",className:"min-w-140px"}],k=o.map(e=>({...e,created_dt:p(e.created_dt),changed_dt:e.changed_dt?p(e.changed_dt):"-",changed_by:e.changed_by||"-"})),D=()=>{n(!0)},w=e=>{y({material_name:e.material_name,material_category:e.material_category,unit_of_measure:e.unit_of_measure,is_active:e.is_active,user_id:l==null?void 0:l.full_name}),n(!1)},N=e=>{const r=o.find(c=>c.id===e.id);r&&(i(r),d(!0))},S=e=>{t&&(b({id:t.id,material:{material_name:e.material_name,material_category:e.material_category,unit_of_measure:e.unit_of_measure,user_id:l==null?void 0:l.full_name}}),d(!1),i(null))},j=e=>{const r=o.find(c=>c.id===e.id);r&&(i(r),m(!0))},A=()=>{t&&(x(t.id),m(!1),i(null))};return M?a.jsx(h,{children:a.jsxs("div",{className:"card-body text-center py-10",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("div",{className:"mt-3",children:"Memuat data material..."})]})}):a.jsxs("div",{className:"container-fluid",children:[a.jsx(C,{breadcrumbs:O,children:"Master Material"}),a.jsx(h,{children:a.jsx(E,{className:"card-xl-stretch",rows:k,columns:g,labelAdd:"Material",onEdit:N,onDelete:j,onAddClick:D})}),u&&a.jsx(v,{show:u,title:"Tambah Material",fields:[{name:"material_code",label:"Kode Material",type:"text",required:!0,icon:"code",placeholder:"Masukkan kode material"},{name:"material_name",label:"Nama Material",type:"text",required:!0,icon:"document",placeholder:"Masukkan nama material"},{name:"material_category",label:"Kategori Material",type:"text",required:!0,icon:"tag",placeholder:"Masukkan kategori material"},{name:"unit_of_measure",label:"Unit of Measure",type:"text",required:!0,icon:"scale",placeholder:"Masukkan unit of measure"},{name:"is_active",label:"Status Aktif",type:"checkbox",required:!1,icon:"check-circle"}],onSubmit:w,onClose:()=>n(!1)}),_&&t&&a.jsx(T,{show:_,title:"Edit Material",fields:[{name:"material_code",label:"Kode Material",type:"text",required:!0,icon:"code"},{name:"material_name",label:"Nama Material",type:"text",required:!0,icon:"document"},{name:"material_category",label:"Kategori Material",type:"text",required:!0,icon:"tag"},{name:"unit_of_measure",label:"Satuan Ukuran",type:"text",required:!0,icon:"scale"}],initialData:{material_name:t.material_name,material_category:t.material_category,unit_of_measure:t.unit_of_measure},onSave:S,onClose:()=>{d(!1),i(null)}}),f&&t&&a.jsx(K,{show:f,title:"Hapus Material",itemName:t.material_name,onConfirm:A,onClose:()=>{m(!1),i(null)}})]})};export{U as default};
