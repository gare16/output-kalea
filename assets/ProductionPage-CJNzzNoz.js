import{$ as K,Y as ke,a0 as z,Z as S,j as e,a1 as W,r as b,a2 as xe,_ as pe,a3 as he,C as B,g as me,i as C,N as ue,O as ye,k as J}from"./index-BXdnQbB_.js";import{l as Pe,u as Ce}from"./useSpkList-CPp8mbeO.js";import{T as Ke}from"./TablesWidget13-CqfjLc2n.js";import{D as Ee,a as Ie}from"./DynamicDeleteModal-CGetyfKf.js";import{u as O,a as G}from"./useMutation-qdNYSY8E.js";import{u as _e}from"./useVendors-C4PkFDYA.js";import{S as M}from"./StatusBadge-DN9n35YM.js";import{f as Me}from"./dateFormatter-CGxZEcZP.js";import"./ThemeProvider-BUhmALRu.js";import"./Modal-D2BAKrmG.js";import"./hasClass-Cl4BTZqK.js";import"./warning-uczxBD7s.js";const we=async()=>(await K.get("/delivery-note/type")).data.data,Re=async i=>{const n=await K.get("/delivery-note",{params:i});return{data:n.data.data,meta:n.data.meta}},Be=async i=>(await K.get(`/delivery-note/${i}`)).data.data,Te=async i=>{const o=i?`/delivery-note/generate-no/${encodeURIComponent((d=>d.replace(/^SURAT JALAN\s+/i,"").trim().replace(/\s+/g,"_").toUpperCase())(i))}`:"/delivery-note/generate-no";return(await K.get(o)).data.data.delivery_note_no},De=async i=>(await K.post("/delivery-note",i)).data.data,Ue=async i=>(await K.put(`/delivery-note/${i.id}`,i)).data.data,ze=async i=>{await K.post("/delivery-note/approval",i)},Ge=async i=>{await K.delete(`/delivery-note/${i}`)},Z=i=>{var t,g;const n=ke(),o=O({queryKey:["delivery-notes",i],queryFn:()=>Re(i)}),m=G({mutationFn:h=>De(h),onSuccess:h=>{console.log("Add delivery note success:",h),n.invalidateQueries({queryKey:["delivery-notes"]}),S.success("Delivery note added successfully")},onError:h=>{var l;const a=h instanceof z?(l=h.response)==null?void 0:l.data.message:`Gagal Menambah Surat Jalan: ${h.message}`;Array.isArray(a)?a.forEach(s=>S.error(s)):S.error(a)}}),d=G({mutationFn:h=>Ue(h),onSuccess:h=>{console.log("Update delivery note success:",h),n.invalidateQueries({queryKey:["delivery-notes"]}),S.success("Delivery note updated successfully")},onError:h=>{var l;const a=h instanceof z?(l=h.response)==null?void 0:l.data.message:`Gagal Mengubah Surat Jalan: ${h.message}`;Array.isArray(a)?a.forEach(s=>S.error(s)):S.error(a)}}),r=G({mutationFn:h=>ze(h),onSuccess:()=>{console.log("Approve delivery note success"),n.invalidateQueries({queryKey:["delivery-notes"]}),S.success("Delivery note approved successfully")},onError:h=>{var l;const a=h instanceof z?(l=h.response)==null?void 0:l.data.message:`Gagal Approve: ${h.message}`;Array.isArray(a)?a.forEach(s=>S.error(s)):S.error(a)}}),p=G({mutationFn:h=>Ge(h),onSuccess:()=>{console.log("Delete delivery note success"),n.invalidateQueries({queryKey:["delivery-notes"]}),S.success("Delivery note deleted successfully")},onError:h=>{var l;const a=h instanceof z?(l=h.response)==null?void 0:l.data.message:`Gagal Menghapus Surat Jalan: ${h.message}`;Array.isArray(a)?a.forEach(s=>S.error(s)):S.error(a)}});return{deliveryNotes:((t=o.data)==null?void 0:t.data)||[],meta:(g=o.data)==null?void 0:g.meta,isLoading:o.isLoading,error:o.error,addDeliveryNote:m.mutate,updateDeliveryNote:d.mutate,approveDeliveryNote:r.mutate,isAdding:m.isPending,isUpdating:d.isPending,isApproving:r.isPending,isDeleting:p.isPending,deleteDeliveryNote:p.mutate}},Y=i=>{const n=O({queryKey:["delivery-note",i],queryFn:()=>Be(i),enabled:!!i});return{deliveryNote:n.data,isLoading:n.isLoading,error:n.error}},je=()=>{const i=O({queryKey:["delivery-note-types"],queryFn:we});return{types:i.data||[],isLoading:i.isLoading,error:i.error}},ge=i=>{const n=O({queryKey:["generate-delivery-note-no",i],queryFn:()=>Te(i),enabled:!!i});return{deliveryNoteNo:n.data,isLoading:n.isLoading,error:n.error,refetch:n.refetch}},Le=({deliveryNote:i,spk:n,spkDetails:o})=>{const m=(r,p)=>{switch(p){case"PERMINTAAN_KAIN":if("qty_spk"in r&&"nama_material"in r&&"jumlah_material"in r&&"kurang_material"in r){const t=r;return{product:t.product_name,variant:`${t.color} - ${t.size}`,qtySpk:t.qty_spk,namaMaterial:t.nama_material,jumlahMaterial:t.jumlah_material,kurangMaterial:t.kurang_material}}break;case"PENGIRIMAN_BARANG":if("qty_spk"in r&&"qty_done"in r&&"qty_out"in r&&"hpp"in r){const t=r;return{product:t.product_name,variant:`${t.color} - ${t.size}`,qtySpk:t.qty_spk,qtyDone:t.qty_done,qtyOut:t.qty_out,hpp:t.hpp}}break;case"BUANG_BENANG_KELUAR":if("qty_order"in r&&"qty_out"in r){const t=r;return{product:t.product_name,variant:`${t.color} - ${t.size}`,qtyOrder:t.qty_order,qtyOut:t.qty_out}}break;case"BUANG_BENANG_MASUK":if("qty_spk"in r&&"qty_out"in r&&"qty_in"in r&&"selisih"in r){const t=r;return{product:t.product_name,variant:`${t.color} - ${t.size}`,qtySpk:t.qty_spk,qtyOut:t.qty_out,qtyIn:t.qty_in,selisih:t.selisih}}break;case"JAHIT_KELUAR":if("qty_order"in r&&"qty_out"in r){const t=r;return{product:t.product_name,variant:`${t.color} - ${t.size}`,qtyOrder:t.qty_order,qtyOut:t.qty_out}}break;case"JAHIT_MASUK":if("qty_spk"in r&&"qty_out"in r&&"qty_in"in r&&"selisih"in r){const t=r;return{product:t.product_name,variant:`${t.color} - ${t.size}`,qtySpk:t.qty_spk,qtyOut:t.qty_out,qtyIn:t.qty_in,selisih:t.selisih}}break}return{product:r.product_name,variant:`${r.color} - ${r.size}`}},d=()=>{if(!o||o.length===0)return null;switch(i.delivery_note_type){case"PERMINTAAN_KAIN":return e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Product"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Color"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Size"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Qty SPK"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Nama Material"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Jumlah Material"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Kurang Material"})]})}),e.jsx("tbody",{children:o.map((r,p)=>{const t=m(r.product_variants,"PERMINTAAN_KAIN");return e.jsxs("tr",{style:{backgroundColor:p%2===0?"#fff":"#f9f9f9"},children:[e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:t.product}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:r.product_variants.color}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:r.product_variants.size}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.qtySpk}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:t.namaMaterial}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.jumlahMaterial}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.kurangMaterial})]},r.id??p)})})]});case"PENGIRIMAN_BARANG":return e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Product"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Color"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Size"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Qty SPK"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Qty Done"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Qty Out"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"HPP"})]})}),e.jsx("tbody",{children:o.map((r,p)=>{const t=m(r.product_variants,"PENGIRIMAN_BARANG");return e.jsxs("tr",{style:{backgroundColor:p%2===0?"#fff":"#f9f9f9"},children:[e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:t.product}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:r.product_variants.color}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:r.product_variants.size}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.qtySpk}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.qtyDone}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.qtyOut}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.hpp})]},r.id??p)})})]});case"BUANG_BENANG_KELUAR":return e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Product"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Color"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Size"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Qty Order"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Qty Out"})]})}),e.jsx("tbody",{children:o.map((r,p)=>{const t=m(r.product_variants,"BUANG_BENANG_KELUAR");return e.jsxs("tr",{style:{backgroundColor:p%2===0?"#fff":"#f9f9f9"},children:[e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:t.product}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:r.product_variants.color}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:r.product_variants.size}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.qtyOrder}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.qtyOut})]},r.id??p)})})]});case"BUANG_BENANG_MASUK":return e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Product"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Color"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Size"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Qty SPK"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Qty Out"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Qty In"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Selisih"})]})}),e.jsx("tbody",{children:o.map((r,p)=>{const t=m(r.product_variants,"BUANG_BENANG_MASUK");return e.jsxs("tr",{style:{backgroundColor:p%2===0?"#fff":"#f9f9f9"},children:[e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:t.product}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:r.product_variants.color}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:r.product_variants.size}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.qtySpk}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.qtyOut}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.qtyIn}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.selisih})]},r.id??p)})})]});case"JAHIT_KELUAR":return e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Product"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Color"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Size"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Qty Order"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Qty Out"})]})}),e.jsx("tbody",{children:o.map((r,p)=>{const t=m(r.product_variants,"JAHIT_KELUAR");return e.jsxs("tr",{style:{backgroundColor:p%2===0?"#fff":"#f9f9f9"},children:[e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:t.product}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:r.product_variants.color}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:r.product_variants.size}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.qtyOrder}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.qtyOut})]},r.id??p)})})]});case"JAHIT_MASUK":return e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Product"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Color"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Size"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Qty SPK"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Qty Out"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Qty In"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Selisih"})]})}),e.jsx("tbody",{children:o.map((r,p)=>{const t=m(r.product_variants,"JAHIT_MASUK");return e.jsxs("tr",{style:{backgroundColor:p%2===0?"#fff":"#f9f9f9"},children:[e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:t.product}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:r.product_variants.color}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:r.product_variants.size}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.qtySpk}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.qtyOut}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.qtyIn}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:t.selisih})]},r.id??p)})})]});default:return e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"11px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f0f0f0"},children:[e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Product"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"left"},children:"Variant"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Qty Order"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Qty Done"}),e.jsx("th",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:"Qty Reject"})]})}),e.jsx("tbody",{children:o.map((r,p)=>e.jsxs("tr",{style:{backgroundColor:p%2===0?"#fff":"#f9f9f9"},children:[e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px"},children:r.product_variants.product_name}),e.jsxs("td",{style:{border:"1px solid #ccc",padding:"8px"},children:[r.product_variants.color," - ",r.product_variants.size]}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:r.qty_order}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:r.qty_done}),e.jsx("td",{style:{border:"1px solid #ccc",padding:"8px",textAlign:"center"},children:r.qty_reject})]},r.id??p))})]})}};return e.jsxs("div",{style:{fontFamily:"Arial, sans-serif",maxWidth:"210mm",margin:"0 auto",padding:"16mm",backgroundColor:"#fff",color:"#000",lineHeight:"1.4",fontSize:"12px"},children:[e.jsx("h2",{style:{textAlign:"center",marginBottom:"20px"},children:"Surat Jalan"}),e.jsx("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"24px",fontSize:"12px"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",fontWeight:"bold",width:"160px"},children:"Delivery Note No"}),e.jsx("td",{style:{padding:"6px 8px"},children:i.delivery_note_no})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",fontWeight:"bold"},children:"Delivery Date"}),e.jsx("td",{style:{padding:"6px 8px"},children:i.delivery_note_date?Me(i.delivery_note_date):"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",fontWeight:"bold"},children:"Type"}),e.jsx("td",{style:{padding:"6px 8px"},children:i.delivery_note_type||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",fontWeight:"bold"},children:"Vendor"}),e.jsx("td",{style:{padding:"6px 8px"},children:i.vendor.name})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",fontWeight:"bold"},children:"Destination"}),e.jsx("td",{style:{padding:"6px 8px"},children:i.destination})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",fontWeight:"bold"},children:"No SPK"}),e.jsx("td",{style:{padding:"6px 8px"},children:(n==null?void 0:n.map(r=>r.spk_no).join(", "))||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{padding:"6px 8px",fontWeight:"bold"},children:"Notes"}),e.jsx("td",{style:{padding:"6px 8px"},children:i.notes||"-"})]})]})}),o&&o.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{style:{marginBottom:"10px"},children:"Product Variants"}),d()]})]})},ce={deliveryNote:{id:"1",delivery_note_no:"DN-KAIN-001",delivery_note_date:"2024-12-01",delivery_note_type:"PERMINTAAN_KAIN",vendor:{name:"Supplier Kain PT. ABC"},destination:"Workshop A",notes:"Permintaan kain untuk produksi bulan depan"},spk:[{id:"spk-1",spk_no:"SPK-001",buyer:"PT. XYZ",spk_date:"2024-11-15",deadline:"2024-12-15",status:"Diproses",notes:"Order musim dingin"}],spkDetails:[{id:"detail-1",product_variants:{id:"pv-1",product_name:"Kemeja Casual",size:"L",color:"Biru",barcode:"KEMEJA-001",sku:"KEM-L-BIRU",price:0,cost_price:0,nama_material:"Katun Premium",jumlah_material:5,kurang_material:2,qty_spk:100},qty_order:100},{id:"detail-2",product_variants:{id:"pv-2",product_name:"Celana Panjang",size:"M",color:"Hitam",barcode:"CELANA-002",sku:"CEL-M-HITAM",price:0,cost_price:0,nama_material:"Denim",jumlah_material:3,kurang_material:1,qty_spk:80},qty_order:80}]},Je={deliveryNote:{id:"2",delivery_note_no:"DN-BARANG-001",delivery_note_date:"2024-12-01",delivery_note_type:"PENGIRIMAN_BARANG",vendor:{name:"Penerima PT. XYZ"},destination:"Gudang Jakarta",notes:"Pengiriman barang hasil produksi"},spk:[{id:"spk-2",spk_no:"SPK-002",buyer:"PT. XYZ",spk_date:"2024-11-01",deadline:"2024-12-01",status:"Selesai",notes:"Order reguler"}],spkDetails:[{id:"detail-3",product_variants:{id:"pv-3",product_name:"Kemeja Formal",size:"L",color:"Putih",barcode:"KEMFORM-001",sku:"KFOR-L-PUTIH",price:15e4,cost_price:1e5,qty_spk:200,qty_done:200,qty_out:180,hpp:1e5},qty_done:200},{id:"detail-4",product_variants:{id:"pv-4",product_name:"Jaket Hoodie",size:"XL",color:"Abu",barcode:"JAKHOOD-001",sku:"JAK-XL-ABU",price:2e5,cost_price:14e4,qty_spk:150,qty_done:150,qty_out:140,hpp:14e4},qty_done:150}]},Oe={deliveryNote:{id:"3",delivery_note_no:"DN-BENANG-KELUAR-001",delivery_note_date:"2024-12-01",delivery_note_type:"BUANG_BENANG_KELUAR",vendor:{name:"Workshop A"},destination:"Departemen Jahit",notes:"Pengiriman benang sisa produksi"},spk:[{id:"spk-3",spk_no:"SPK-003",buyer:"PT. ABC",spk_date:"2024-11-20",deadline:"2024-12-20",status:"Diproses",notes:"Order potongan"}],spkDetails:[{id:"detail-5",product_variants:{id:"pv-5",product_name:"Kemeja Casual",size:"M",color:"Merah",barcode:"KEMEJA-003",sku:"KEM-M-MERAH",price:0,cost_price:0,qty_order:50,qty_out:5},qty_order:50},{id:"detail-6",product_variants:{id:"pv-6",product_name:"T-Shirt",size:"S",color:"Hijau",barcode:"TSHIRT-001",sku:"TSH-S-HIJAU",price:0,cost_price:0,qty_order:40,qty_out:3},qty_order:40}]},Qe={deliveryNote:{id:"4",delivery_note_no:"DN-BENANG-MASUK-001",delivery_note_date:"2024-12-01",delivery_note_type:"BUANG_BENANG_MASUK",vendor:{name:"Departemen Jahit"},destination:"Workshop A",notes:"Pengembalian benang sisa dari departemen jahit"},spk:[{id:"spk-4",spk_no:"SPK-004",buyer:"PT. ABC",spk_date:"2024-11-20",deadline:"2024-12-20",status:"Diproses",notes:"Order potongan"}],spkDetails:[{id:"detail-7",product_variants:{id:"pv-7",product_name:"Kemeja Casual",size:"M",color:"Merah",barcode:"KEMEJA-003",sku:"KEM-M-MERAH",price:0,cost_price:0,qty_spk:10,qty_out:7,qty_in:3,selisih:4}},{id:"detail-8",product_variants:{id:"pv-8",product_name:"T-Shirt",size:"S",color:"Hijau",barcode:"TSHIRT-001",sku:"TSH-S-HIJAU",price:0,cost_price:0,qty_spk:8,qty_out:5,qty_in:2,selisih:3}}]},He={deliveryNote:{id:"5",delivery_note_no:"DN-JAHIT-KELUAR-001",delivery_note_date:"2024-12-01",delivery_note_type:"JAHIT_KELUAR",vendor:{name:"Workshop A"},destination:"Departemen Jahit",notes:"Pengiriman bahan ke departemen jahit"},spk:[{id:"spk-5",spk_no:"SPK-005",buyer:"PT. ABC",spk_date:"2024-11-25",deadline:"2024-12-25",status:"Diproses",notes:"Produksi musim panas"}],spkDetails:[{id:"detail-9",product_variants:{id:"pv-9",product_name:"Blazer",size:"L",color:"Coklat",barcode:"BLAZER-001",sku:"BLZ-L-COKLAT",price:0,cost_price:0,qty_order:25,qty_out:20},qty_order:25},{id:"detail-10",product_variants:{id:"pv-10",product_name:"Rok Panjang",size:"S",color:"Navy",barcode:"ROK-001",sku:"ROK-S-NAVY",price:0,cost_price:0,qty_order:30,qty_out:28},qty_order:30}]},$e={deliveryNote:{id:"6",delivery_note_no:"DN-JAHIT-MASUK-001",delivery_note_date:"2024-12-01",delivery_note_type:"JAHIT_MASUK",vendor:{name:"Departemen Jahit"},destination:"Workshop A",notes:"Pengembalian bahan dari departemen jahit"},spk:[{id:"spk-6",spk_no:"SPK-006",buyer:"PT. ABC",spk_date:"2024-11-25",deadline:"2024-12-25",status:"Diproses",notes:"Produksi musim panas"}],spkDetails:[{id:"detail-11",product_variants:{id:"pv-11",product_name:"Blazer",size:"L",color:"Coklat",barcode:"BLAZER-001",sku:"BLZ-L-COKLAT",price:0,cost_price:0,qty_spk:20,qty_out:18,qty_in:15,selisih:3}},{id:"detail-12",product_variants:{id:"pv-12",product_name:"Rok Panjang",size:"S",color:"Navy",barcode:"ROK-001",sku:"ROK-S-NAVY",price:0,cost_price:0,qty_spk:28,qty_out:25,qty_in:22,selisih:3}}]},Fe=()=>{const i=W(),[n,o]=b.useState(!1),[m,d]=b.useState(!1),[r,p]=b.useState(null),[t,g]=b.useState(null),h=b.useRef(null),[a,l]=b.useState(""),s=_=>{switch((_==null?void 0:_.toUpperCase().trim())||""){case"PERMINTAAN_KAIN":return ce;case"PENGIRIMAN_BARANG":return Je;case"BUANG_BENANG_KELUAR":return Oe;case"BUANG_BENANG_MASUK":return Qe;case"JAHIT_KELUAR":return He;case"JAHIT_MASUK":return $e;default:return ce}},{deliveryNotes:c,addDeliveryNote:v,deleteDeliveryNote:y}=Z(),{deliveryNote:N,isLoading:A}=Y(t||""),{types:w}=je(),{vendors:x}=_e(),{deliveryNoteNo:Q,refetch:D}=ge(a),H=[{key:"noSJ",label:"No. SJ",className:"min-w-120px"},{key:"tanggal",label:"Tanggal",className:"min-w-100px"},{key:"jenis",label:"Jenis",className:"min-w-100px"},{key:"vendor",label:"Vendor",className:"min-w-125px"},{key:"tujuan",label:"Tujuan",className:"min-w-125px"},{key:"status",label:"Status",className:"min-w-100px"},{key:"createdBy",label:"Created By",className:"min-w-125px"}],k=c.map(_=>({id:_.id,noSJ:_.delivery_note_no,tanggal:_.delivery_note_date,jenis:_.delivery_note_type,vendor:_.vendor.name,tujuan:_.destination,status:e.jsx(M,{status:_.status.toLowerCase()}),createdBy:"System"})),f=_=>{p(_),o(!0)},R=()=>{y(r==null?void 0:r.id),o(!1)},$=_=>{i(`/production/edit-surat-jalan/${_.id}`)},U=_=>{const I=_.id;g(I)},j=Pe.useReactToPrint({contentRef:h,documentTitle:N?`SuratJalan-${N.delivery_note_no}`:"SuratJalan-Detail",pageStyle:`
      @page {
        size: A4;
        margin: 20mm;
      }
      body {
        -webkit-print-color-adjust: exact !important;
        color-adjust: exact !important;
      }
    `});b.useEffect(()=>{N&&!A&&t&&(j(),g(null))},[N,A,j,t]);const u=()=>{i("/production/add-surat-jalan")},P=_=>{l(_),D()},E=_=>{const I={delivery_note_no:Q||_.noSJ,delivery_note_date:_.tanggal,delivery_note_type:_.jenis,vendor_id:_.vendor,destination:_.tujuan,status:_.status,notes:_.notes||"",user_id:"system",details:[]};v(I),d(!1),l("")};return e.jsxs("div",{children:[N&&e.jsx("div",{ref:h,className:"spk-print-content",style:{position:"absolute",left:"-9999px",top:"-9999px"},children:e.jsx(Le,{deliveryNote:s(N.delivery_note_type).deliveryNote,spk:s(N.delivery_note_type).spk||[],spkDetails:s(N.delivery_note_type).spkDetails||[]})}),e.jsx(Ke,{className:"card-xl-stretch",rows:k,columns:H,labelAdd:"Surat Jalan",filters:[{key:"jenis",label:"Filter by Jenis"},{key:"vendor",label:"Filter by Vendor"},{key:"status",label:"Filter by Status"}],onDelete:f,onEdit:$,onAddClick:u,onPrint:U,onRowClick:_=>i(`/production/delivery-note-detail/detail/${_.id}`),roleAccess:{add:["ADMIN","OWNER","ADMIN PRODUKSI"],edit:["ADMIN","OWNER","ADMIN PRODUKSI"],print:["ADMIN","OWNER","ADMIN PRODUKSI","WAREHOUSE"]}}),n&&r&&e.jsx(Ee,{show:n,title:"Delete Surat Jalan",itemName:r.noSJ,onConfirm:R,onClose:()=>{o(!1),p(null)}}),m&&e.jsx(Ie,{show:m,title:"Add Surat Jalan",fields:[{name:"jenis",label:"Jenis",type:"select",required:!0,options:w.map(_=>({value:_.id,label:_.name})),icon:"cog",onChange:P},{name:"noSJ",label:"No. SJ",type:"text",required:!0,icon:"document"},{name:"tanggal",label:"Tanggal",type:"date",required:!0,icon:"calendar"},{name:"vendor",label:"Vendor",type:"select",required:!0,options:x.map(_=>({value:_.id,label:_.name})),icon:"user"},{name:"tujuan",label:"Tujuan",type:"text",required:!0,icon:"map"},{name:"status",label:"Status",type:"select",required:!0,options:[{value:"PENDING",label:"Pending"},{value:"DONE",label:"Done"}],icon:"check-circle"},{name:"notes",label:"Notes",type:"textarea",required:!1,icon:"comment"}],onSubmit:E,onClose:()=>d(!1)})]})},We={delivery_note_no:"",delivery_note_date:"",delivery_note_type:"PERMINTAAN_KAIN",vendor_id:"",destination:"",status:"PENDING",notes:"",user_id:"system"},ve=(i,n)=>{const o=(n==null?void 0:n.autoGenerateNo)??!0,m=(n==null?void 0:n.autoSetDate)??!0,d=b.useMemo(()=>({...We,...i}),[i]),[r,p]=b.useState(d);b.useEffect(()=>{p(a=>({...a,...d}))},[d]);const{deliveryNoteNo:t,refetch:g}=ge(o?r.delivery_note_type:void 0);return b.useEffect(()=>{o&&r.delivery_note_type&&g()},[o,r.delivery_note_type,g]),b.useEffect(()=>{o&&t&&p(a=>({...a,delivery_note_no:t}))},[o,t]),b.useEffect(()=>{if(!m||i!=null&&i.delivery_note_date)return;const a=new Date().toISOString().split("T")[0];p(l=>({...l,delivery_note_date:a}))},[m,i==null?void 0:i.delivery_note_date]),{formData:r,updateFormData:a=>{p(l=>({...l,...a}))}}},Ne=()=>{const{data:i}=Ce(),[n,o]=b.useState([]),[m,d]=b.useState({});b.useEffect(()=>{n.forEach(t=>{m[t]||(async()=>{try{const h=await K.get(`/spk/${t}`);h.data.success&&d(a=>({...a,[t]:h.data.data.details}))}catch(h){console.error("Error fetching SPK detail:",h)}})()})},[n,m]);const r=t=>{o(g=>g.includes(t)?g.filter(h=>h!==t):[...g,t])},p=b.useCallback(t=>{o(g=>g.length===t.length&&g.every(a=>t.includes(a))?g:t)},[]);return{spkList:i,selectedSpks:n,spkDetails:m,toggleSpkSelection:r,setSelectedSpks:p}},q={PERMINTAAN_KAIN:"PERMINTAAN_KAIN",BUANG_BENANG_KELUAR:"BUANG_BENANG_KELUAR",JAHIT_KELUAR:"JAHIT_KELUAR",BUANG_BENANG_MASUK:"BUANG_BENANG_MASUK",JAHIT_MASUK:"JAHIT_MASUK",PENGIRIMAN_BARANG:"PENGIRIMAN_BARANG"},oe=(i,n,o)=>{const m=Array.isArray(i)?i:[];if(o===q.PERMINTAAN_KAIN){const d=Array.isArray(n.req_material)?n.req_material:[],r=d.find(t=>/kain/i.test(t.material_name))||d[0];if(r)return{material_name:r.material_name,material_qty:r.qty_required};const p=m.find(t=>/kain/i.test(t.material_name));if(p)return{material_name:p.material_name,material_qty:p.qty_per_unit*n.qty_order}}return{material_name:"",material_qty:0}},be=i=>{const[n,o]=b.useState([]),m=(t,g,h)=>{if(h){const{material_name:a,material_qty:l}=oe(t.bom,t,i),s={spk_detail_id:t.id,item_type:"PRODUCT",product_variant_id:(t==null?void 0:t.id)??"",material_id:null,qty_out:t.qty_order,qty_in:0,labor_cost:0,spk_no:g.noSpk,product_name:t.product_name,color:t.color,size:t.size,qty_order:t.qty_order,material_name:a,material_qty:l,short_material:0,qty_done:0,hpp:0,selisih:0,req_material:t.req_material};o(c=>[...c,s])}else o(a=>a.filter(l=>l.spk_detail_id!==t.id))},d=(t,g,h,a)=>{if(g){const l=a.map(s=>{const{material_name:c,material_qty:v}=oe(s.bom,s,i);return{spk_detail_id:s.id,item_type:"PRODUCT",product_variant_id:(s==null?void 0:s.id)??"",material_id:null,qty_out:s.qty_order,qty_in:0,labor_cost:0,spk_no:h.noSpk,product_name:s.product_name,color:s.color,size:s.size,qty_order:s.qty_order,material_name:c,material_qty:v,short_material:0,qty_done:0,hpp:0,selisih:0,req_material:s.req_material}});o(s=>[...s.filter(c=>!a.some(v=>v.id===c.spk_detail_id)),...l])}else o(l=>l.filter(s=>!a.some(c=>c.id===s.spk_detail_id)))},r=(t,g,h)=>{o(a=>a.map(l=>l.spk_detail_id===t?{...l,[g]:h}:l))},p=b.useCallback(t=>{o(t)},[]);return{selectedDetails:n,handleDetailSelect:m,handleSelectAllDetails:d,updateDetail:r,setSelectedDetails:p}},fe=({formData:i,updateFormData:n})=>{const{types:o}=je(),{vendors:m}=_e();return e.jsxs("div",{children:[e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Delivery Note No *"}),e.jsx("input",{type:"text",className:"form-control",value:i.delivery_note_no,onChange:d=>n({delivery_note_no:d.target.value}),disabled:!0})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Delivery Date *"}),e.jsx("input",{type:"date",className:"form-control",value:i.delivery_note_date,onChange:d=>n({delivery_note_date:d.target.value})})]})})]}),e.jsxs("div",{className:"row mb-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Type *"}),e.jsx("select",{className:"form-select",value:i.delivery_note_type,onChange:d=>n({delivery_note_type:d.target.value}),children:o.map(d=>e.jsx("option",{value:d.id,children:d.name},d.id))})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Vendor *"}),e.jsxs("select",{className:"form-select",value:i.vendor_id,onChange:d=>n({vendor_id:d.target.value}),children:[e.jsx("option",{value:"",children:"Select Vendor"}),m.map(d=>e.jsx("option",{value:d.id,children:d.name},d.id))]})]})})]}),e.jsx("div",{className:"row mb-4",children:e.jsx("div",{className:"col-md-12",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Destination *"}),e.jsx("input",{type:"text",className:"form-control",value:i.destination,onChange:d=>n({destination:d.target.value})})]})})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"form-label",children:"Notes"}),e.jsx("textarea",{className:"form-control",rows:3,value:i.notes,onChange:d=>n({notes:d.target.value})})]})]})},Ae=({spkList:i,selectedSpks:n,toggleSpkSelection:o})=>{const[m,d]=b.useState(""),[r,p]=b.useState(1),t=3,g=(i==null?void 0:i.filter(l=>l.status==="approved"&&(m===""||l.noSpk.toLowerCase().includes(m.toLowerCase())||l.buyer.toLowerCase().includes(m.toLowerCase()))))||[],h=g.slice((r-1)*t,r*t),a=Math.ceil(g.length/t);return e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"form-label",children:"Select SPKs *"}),e.jsx("div",{className:"row mb-3",children:e.jsx("div",{className:"col-md-6",children:e.jsx("input",{type:"text",className:"form-control",placeholder:"Search SPK by number or buyer...",value:m,onChange:l=>d(l.target.value),onKeyDown:l=>{l.key==="Enter"&&p(1)}})})}),e.jsx("div",{className:"row",children:h.map(l=>e.jsx("div",{className:"col-md-6 col-lg-4 mb-3",children:e.jsx("div",{className:`card h-100 ${n.includes(l.id)?"border-primary":"border-light"}`,children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",id:`spk-${l.id}`,checked:n.includes(l.id),disabled:l.status!=="approved",onChange:()=>o(l.id)}),e.jsx("label",{className:"form-check-label w-100",htmlFor:`spk-${l.id}`,children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("strong",{className:"text-primary",children:l.noSpk}),e.jsx("small",{className:"text-muted",children:l.buyer}),e.jsx("span",{className:`badge ${l.status==="approved"?"bg-success":l.status==="in_progress"?"bg-warning":"bg-secondary"} mt-1 align-self-start`,children:l.status.replace("_"," ").toUpperCase()})]})})]})})})},l.id))}),a>1&&e.jsx("div",{className:"d-flex justify-content-center mt-3",children:e.jsx("nav",{children:e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{className:`page-item ${r===1?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>p(l=>Math.max(1,l-1)),disabled:r===1,children:"Previous"})}),Array.from({length:a},(l,s)=>s+1).map(l=>e.jsx("li",{className:`page-item ${r===l?"active":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>p(l),children:l})},l)),e.jsx("li",{className:`page-item ${r===a?"disabled":""}`,children:e.jsx("button",{className:"page-link",onClick:()=>p(l=>Math.min(a,l+1)),disabled:r===a,children:"Next"})})]})})}),n.length>0&&e.jsx("div",{className:"mt-3",children:e.jsxs("small",{className:"text-muted",children:["Selected ",n.length," SPK",n.length>1?"s":""]})})]})},qe=({selectedSpks:i,spkList:n,spkDetails:o,selectedDetails:m,deliveryNoteType:d,handleDetailSelect:r,handleSelectAllDetails:p,updateDetail:t})=>{if(i.length===0)return null;const g=()=>{const a=[e.jsx("th",{},"checkbox"),e.jsx("th",{children:"Product"},"product"),e.jsx("th",{children:"Color"},"color"),e.jsx("th",{children:"Size"},"size")];return d===q.PERMINTAAN_KAIN?a.push(e.jsx("th",{children:"Qty SPK"},"qty_spk"),e.jsx("th",{children:"Nama Material"},"material_name"),e.jsx("th",{children:"Jumlah Material"},"material_qty"),e.jsx("th",{children:"Kurang Material"},"short_material")):d===q.BUANG_BENANG_KELUAR||d===q.JAHIT_KELUAR?a.push(e.jsx("th",{children:"Qty Order"},"qty_order"),e.jsx("th",{children:"Qty Out"},"qty_out")):d===q.BUANG_BENANG_MASUK||d===q.JAHIT_MASUK?a.push(e.jsx("th",{children:"Qty SPK"},"qty_spk"),e.jsx("th",{children:"Qty Out"},"qty_out"),e.jsx("th",{children:"Qty In"},"qty_in"),e.jsx("th",{children:"Selisih"},"selisih")):d===q.PENGIRIMAN_BARANG?a.push(e.jsx("th",{children:"Qty SPK"},"qty_spk"),e.jsx("th",{children:"Qty Done"},"qty_done"),e.jsx("th",{children:"Qty Out"},"qty_out"),e.jsx("th",{children:"HPP"},"hpp")):a.push(e.jsx("th",{children:"Qty Order"},"qty_order"),e.jsx("th",{children:"Qty"},"qty_out")),a},h=(a,l)=>{var y,N,A,w;const s=m.some(x=>x.spk_detail_id===a.id),c=m.find(x=>x.spk_detail_id===a.id),v=[e.jsx("td",{onClick:x=>x.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:s,onClick:x=>x.stopPropagation(),onChange:x=>r(a,l,x.target.checked)})},"checkbox"),e.jsx("td",{children:a.product_name},"product"),e.jsx("td",{children:a.color},"color"),e.jsx("td",{children:a.size},"size")];return d===q.PERMINTAAN_KAIN?v.push(e.jsx("td",{children:a.qty_order},"qty_spk"),e.jsx("td",{onClick:x=>x.stopPropagation(),children:s&&e.jsx("input",{type:"text",className:"form-control",value:((N=(y=c==null?void 0:c.req_material)==null?void 0:y[0])==null?void 0:N.material_name)??(c==null?void 0:c.material_name)??"",readOnly:!0})},"material_name"),e.jsx("td",{onClick:x=>x.stopPropagation(),children:s&&e.jsx("input",{type:"number",className:"form-control",value:((w=(A=c==null?void 0:c.req_material)==null?void 0:A[0])==null?void 0:w.qty_required)??(c==null?void 0:c.material_qty)??"",readOnly:!0})},"material_qty"),e.jsx("td",{onClick:x=>x.stopPropagation(),children:s&&e.jsx("input",{type:"number",className:"form-control",value:(c==null?void 0:c.short_material)||"",onChange:x=>t(a.id,"short_material",x.target.value===""?0:parseInt(x.target.value)||0),min:0})},"short_material")):d===q.BUANG_BENANG_KELUAR||d===q.JAHIT_KELUAR?v.push(e.jsx("td",{children:a.qty_order},"qty_order"),e.jsx("td",{onClick:x=>x.stopPropagation(),children:s&&e.jsx("input",{type:"number",className:"form-control",value:(c==null?void 0:c.qty_out)||"",onChange:x=>t(a.id,"qty_out",x.target.value===""?0:parseInt(x.target.value)||0),max:a.qty_order,min:0})},"qty_out")):d===q.BUANG_BENANG_MASUK||d===q.JAHIT_MASUK?v.push(e.jsx("td",{children:a.qty_order},"qty_spk"),e.jsx("td",{onClick:x=>x.stopPropagation(),children:s&&e.jsx("input",{type:"number",className:"form-control",value:(c==null?void 0:c.qty_out)||"",onChange:x=>t(a.id,"qty_out",x.target.value===""?0:parseInt(x.target.value)||0),min:0})},"qty_out"),e.jsx("td",{onClick:x=>x.stopPropagation(),children:s&&e.jsx("input",{type:"number",className:"form-control",value:(c==null?void 0:c.qty_in)||"",onChange:x=>t(a.id,"qty_in",x.target.value===""?0:parseInt(x.target.value)||0),min:0})},"qty_in"),e.jsx("td",{onClick:x=>x.stopPropagation(),children:s&&e.jsx("input",{type:"number",className:"form-control",value:(c==null?void 0:c.selisih)||"",onChange:x=>t(a.id,"selisih",x.target.value===""?0:parseInt(x.target.value)||0),min:0})},"selisih")):d===q.PENGIRIMAN_BARANG?v.push(e.jsx("td",{children:a.qty_order},"qty_spk"),e.jsx("td",{onClick:x=>x.stopPropagation(),children:s&&e.jsx("input",{type:"number",className:"form-control",value:(c==null?void 0:c.qty_done)||"",onChange:x=>t(a.id,"qty_done",x.target.value===""?0:parseInt(x.target.value)||0),min:0})},"qty_done"),e.jsx("td",{onClick:x=>x.stopPropagation(),children:s&&e.jsx("input",{type:"number",className:"form-control",value:(c==null?void 0:c.qty_out)||"",onChange:x=>t(a.id,"qty_out",x.target.value===""?0:parseInt(x.target.value)||0),min:0})},"qty_out"),e.jsx("td",{onClick:x=>x.stopPropagation(),children:s&&e.jsx("input",{type:"number",className:"form-control",value:(c==null?void 0:c.hpp)||"",onChange:x=>t(a.id,"hpp",x.target.value===""?0:parseFloat(x.target.value)||0),min:0,step:"0.01"})},"hpp")):v.push(e.jsx("td",{children:a.qty_order},"qty_order"),e.jsx("td",{onClick:x=>x.stopPropagation(),children:s&&e.jsx("input",{type:"number",className:"form-control",value:(c==null?void 0:c.qty_out)||"",onChange:x=>t(a.id,"qty_out",x.target.value===""?0:parseInt(x.target.value)||0),max:a.qty_order,min:0})},"qty_out")),v};return e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{children:"Select SPK Details"}),i.map(a=>{const l=n==null?void 0:n.find(y=>y.id===a),s=o[a]||[],c=s.length>0&&s.every(y=>m.some(N=>N.spk_detail_id===y.id)),v=s.some(y=>m.some(N=>N.spk_detail_id===y.id));return e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{children:[l==null?void 0:l.noSpk," - ",l==null?void 0:l.buyer]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-striped",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:c,ref:y=>{y&&(y.indeterminate=v&&!c)},onChange:y=>p(a,y.target.checked,l,s)})}),g().slice(1)]})}),e.jsx("tbody",{children:s.map(y=>{const N=m.some(A=>A.spk_detail_id===y.id);return e.jsx("tr",{className:`cursor-pointer ${N?"table-active":""}`,onClick:()=>r(y,l,!N),children:h(y,l)},y.id)})})]})})]},a)})]})},Ze=()=>{const i=W(),{addDeliveryNote:n}=Z(),{currentUser:o}=xe(),{formData:m,updateFormData:d}=ve(),{spkList:r,selectedSpks:p,spkDetails:t,toggleSpkSelection:g}=Ne(),{selectedDetails:h,handleDetailSelect:a,handleSelectAllDetails:l,updateDetail:s}=be(m.delivery_note_type),c=()=>{if(!m.delivery_note_no||!m.delivery_note_date||!m.vendor_id||!m.destination){alert("Please fill all required fields");return}if(h.length===0){alert("Please select at least one SPK detail");return}if(o){const v={...m,user_id:o==null?void 0:o.full_name,details:h.map(y=>({spk_detail_id:y.spk_detail_id,item_type:y.item_type,product_variant_id:y.product_variant_id,material_id:y.material_id,qty_out:y.qty_out,qty_in:y.qty_in,labor_cost:y.labor_cost,material_name:y.material_name,material_qty:y.material_qty,short_material:y.short_material,qty_done:y.qty_done,hpp:y.hpp,selisih:y.selisih}))};console.log(v),n(v),i("/production/surat-jalan")}};return e.jsx("div",{className:"container-fluid",children:e.jsxs(pe,{children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Add Surat Jalan"})}),e.jsxs("div",{className:"card-body",children:[e.jsx(fe,{formData:m,updateFormData:d}),e.jsx(Ae,{spkList:r,selectedSpks:p,toggleSpkSelection:g}),e.jsx(qe,{selectedSpks:p,spkList:r,spkDetails:t,selectedDetails:h,deliveryNoteType:m.delivery_note_type,handleDetailSelect:a,handleSelectAllDetails:l,updateDetail:s}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{className:"btn btn-primary",onClick:c,children:"Save Surat Jalan"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>i("/production/surat-jalan"),children:"Cancel"})]})]})]})})},Ye=()=>{const i=W(),{id:n}=he(),{currentUser:o}=xe(),{updateDeliveryNote:m}=Z(),{deliveryNote:d,isLoading:r,error:p}=Y(n||""),t=b.useRef(!1),g=b.useRef(!1),h=b.useMemo(()=>{var k;if(d)return{delivery_note_no:d.delivery_note_no,delivery_note_date:d.delivery_note_date,delivery_note_type:d.delivery_note_type,vendor_id:d.vendor_id||((k=d.vendor)==null?void 0:k.id)||"",destination:d.destination,status:d.status,notes:d.notes||"",user_id:(o==null?void 0:o.full_name)||"system"}},[d,o==null?void 0:o.full_name]),{formData:a,updateFormData:l}=ve(h,{autoGenerateNo:!1,autoSetDate:!1}),{spkList:s,selectedSpks:c,spkDetails:v,toggleSpkSelection:y,setSelectedSpks:N}=Ne(),{selectedDetails:A,handleDetailSelect:w,handleSelectAllDetails:x,updateDetail:Q,setSelectedDetails:D}=be(a.delivery_note_type);b.useEffect(()=>{if(!(d!=null&&d.spk)||d.spk.length===0||t.current)return;const k=d.spk.map(f=>f.id).filter(Boolean);k.length>0&&(t.current=!0,N(k))},[d,N]),b.useEffect(()=>{var U;if(!((U=d==null?void 0:d.details)!=null&&U.length)||!c.length)return;const k=c.every(j=>v[j]);if(g.current&&!k)return;const R=new Map;if(d.spk_details&&d.spk_details.forEach(j=>{var P,E,_;const u={id:j.id,product_variants:j.product_variants,product_name:((P=j.product_variants)==null?void 0:P.product_name)||"",size:((E=j.product_variants)==null?void 0:E.size)||"",color:((_=j.product_variants)==null?void 0:_.color)||"",qty_order:j.qty_order,qty_done:j.qty_done,qty_reject:j.qty_reject,qty_shipped:0,progress:j.progress||"",status:j.status||"",cost_price:j.cost_price,bom:[],stages:[],req_material:[]};R.set(j.id,u)}),c.forEach(j=>{v[j]&&v[j].forEach(u=>{R.set(u.id,u)})}),R.size===0)return;const $=d.details.map(j=>{var E,_,I,X,V,ee,te,se,re,ne,ae;const u=R.get(j.spk_detail_id);let P=(E=d.spk)==null?void 0:E.find(ie=>{var de;return v[ie.id]&&v[ie.id].map(Se=>Se.id).includes(j.spk_detail_id)?!0:((de=d.spk_details)==null?void 0:de.some(le=>le.id===j.spk_detail_id))||!1});return!P&&d.spk&&d.spk.length>0&&(P=d.spk[0]),{spk_detail_id:j.spk_detail_id,item_type:j.item_type,product_variant_id:j.product_variant_id||((_=u==null?void 0:u.product_variants)==null?void 0:_.id)||"",material_id:j.material_id,qty_out:j.qty_out,qty_in:j.qty_in,labor_cost:j.labor_cost,spk_no:(P==null?void 0:P.spk_no)||((X=(I=d.spk)==null?void 0:I[0])==null?void 0:X.spk_no)||"",product_name:(u==null?void 0:u.product_name)||((V=u==null?void 0:u.product_variants)==null?void 0:V.product_name)||"",color:(u==null?void 0:u.color)||((ee=u==null?void 0:u.product_variants)==null?void 0:ee.color)||"",size:(u==null?void 0:u.size)||((te=u==null?void 0:u.product_variants)==null?void 0:te.size)||"",qty_order:(u==null?void 0:u.qty_order)||0,material_name:j.material_name||((re=(se=u==null?void 0:u.req_material)==null?void 0:se[0])==null?void 0:re.material_name)||"",material_qty:j.material_qty||((ae=(ne=u==null?void 0:u.req_material)==null?void 0:ne[0])==null?void 0:ae.qty_required)||0,short_material:j.short_material||0,qty_done:j.qty_done||(u==null?void 0:u.qty_done)||0,hpp:j.hpp||0,selisih:j.selisih||0,req_material:(u==null?void 0:u.req_material)||[]}});D($),Object.keys(v).length>0&&c.every(j=>v[j])&&(g.current=!0)},[d,c,v,D]);const H=()=>{if(!n){alert("Delivery note ID tidak ditemukan");return}if(!a.delivery_note_no||!a.delivery_note_date||!a.vendor_id||!a.destination){alert("Please fill all required fields");return}if(A.length===0){alert("Please select at least one SPK detail");return}const k={...a,id:n,user_id:(o==null?void 0:o.full_name)||a.user_id,details:A.map(f=>({spk_detail_id:f.spk_detail_id,item_type:f.item_type,product_variant_id:f.product_variant_id,material_id:f.material_id,qty_out:f.qty_out,qty_in:f.qty_in,labor_cost:f.labor_cost,material_name:f.material_name,material_qty:f.material_qty,short_material:f.short_material,qty_done:f.qty_done,hpp:f.hpp,selisih:f.selisih}))};m(k),i("/production/surat-jalan")};return r?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):p||!d?e.jsx("div",{className:"alert alert-danger",children:p?p.message:"Delivery note tidak ditemukan"}):e.jsx("div",{className:"container-fluid",children:e.jsx(pe,{children:e.jsxs("div",{className:"card-body",children:[e.jsx(fe,{formData:a,updateFormData:l}),e.jsx(Ae,{spkList:s,selectedSpks:c,toggleSpkSelection:y}),e.jsx(qe,{selectedSpks:c,spkList:s,spkDetails:v,selectedDetails:A,deliveryNoteType:a.delivery_note_type,handleDetailSelect:w,handleSelectAllDetails:x,updateDetail:Q}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{className:"btn btn-primary",onClick:H,children:"Update Surat Jalan"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>i("/production/surat-jalan"),children:"Cancel"})]})]})})})},T=i=>{if(!i)return"-";const n=new Date(i);return Number.isNaN(n.getTime())?i:n.toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})},L=i=>i==null?"-":new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(i),Xe=({deliveryNoteId:i})=>{var d,r,p,t,g,h,a,l;const{deliveryNote:n,isLoading:o,error:m}=Y(i||"");return i?o?e.jsx(B,{children:e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"200px"},children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})})}):m?e.jsx(B,{children:e.jsxs("div",{className:"alert alert-danger",children:["Error loading delivery note: ",m.message]})}):n?e.jsxs(B,{children:[e.jsxs("div",{className:"card mb-5",children:[e.jsx("div",{className:"card-header",children:e.jsx("div",{className:"card-title",children:e.jsxs("h3",{className:"card-label",children:["Delivery Note #",n.delivery_note_no]})})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-6 col-md-12 mb-4 mb-lg-0",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Delivery Note No:"})," ",n.delivery_note_no]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Delivery Date:"})," ",T(n.delivery_note_date)]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Type:"})," ",n.delivery_note_type]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Vendor:"})," ",((d=n.vendor)==null?void 0:d.name)||"-"]})]}),e.jsxs("div",{className:"col-lg-6 col-md-12",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Destination:"})," ",n.destination]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Status:"})," ",n.status?e.jsx(M,{status:n.status.toLowerCase()}):"-"]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Notes:"})," ",n.notes||"-"]})]})]})})]}),e.jsxs("div",{className:"card mb-5",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Vendor Information"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-lg-6 col-md-12 mb-4 mb-lg-0",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Name:"})," ",((r=n.vendor)==null?void 0:r.name)||"-"]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Contact Person:"})," ",((p=n.vendor)==null?void 0:p.contact_person)||"-"]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Phone:"})," ",((t=n.vendor)==null?void 0:t.phone)||"-"]})]}),e.jsxs("div",{className:"col-lg-6 col-md-12",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Email:"})," ",((g=n.vendor)==null?void 0:g.email)||"-"]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Address:"})," ",((h=n.vendor)==null?void 0:h.address)||"-"]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"City:"})," ",n.vendor?`${n.vendor.city}, ${n.vendor.province}, ${n.vendor.country}`:"-"]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Zip Code:"})," ",((a=n.vendor)==null?void 0:a.zip_code)||"-"]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("strong",{children:"Tax Number:"})," ",((l=n.vendor)==null?void 0:l.tax_number)||"-"]})]})]})})]}),n.details&&n.details.length>0&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Delivery Details"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"d-block d-md-none",children:n.details.map((s,c)=>e.jsx("div",{className:"card mb-3",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("h6",{className:"card-title mb-2",children:["Detail #",c+1]}),e.jsxs("div",{className:"row g-2",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:"Item Type"}),e.jsx("div",{children:s.item_type})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:"Qty Out"}),e.jsx("div",{children:s.qty_out})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:"Qty In"}),e.jsx("div",{children:s.qty_in})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("small",{className:"text-muted",children:"Labor Cost"}),e.jsx("div",{children:L(s.labor_cost)})]})]})]})},s.id||c))}),e.jsx("div",{className:"d-none d-md-block",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table align-middle table-row-dashed fs-6 gy-5",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-start text-muted fw-bold fs-7 text-uppercase gs-0",children:[e.jsx("th",{className:"min-w-125px",children:"SPK Detail ID"}),e.jsx("th",{className:"min-w-100px",children:"Item Type"}),e.jsx("th",{className:"min-w-100px",children:"Product Variant ID"}),e.jsx("th",{className:"min-w-100px",children:"Material ID"}),e.jsx("th",{className:"min-w-80px",children:"Qty Out"}),e.jsx("th",{className:"min-w-80px",children:"Qty In"}),e.jsx("th",{className:"min-w-100px",children:"Labor Cost"}),e.jsx("th",{className:"min-w-100px",children:"Status"})]})}),e.jsx("tbody",{className:"text-gray-600 fw-semibold",children:n.details.map((s,c)=>e.jsxs("tr",{children:[e.jsx("td",{children:s.spk_detail_id}),e.jsx("td",{children:s.item_type}),e.jsx("td",{children:s.product_variant_id||"-"}),e.jsx("td",{children:s.material_id||"-"}),e.jsx("td",{children:s.qty_out}),e.jsx("td",{children:s.qty_in}),e.jsx("td",{children:L(s.labor_cost)}),e.jsx("td",{children:s.status?e.jsx(M,{status:s.status.toLowerCase()}):"-"})]},s.id||c))})]})})})]})]}),n.spk&&n.spk.length>0&&e.jsxs("div",{className:"card mt-5",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"Related SPK Information"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"d-block d-md-none",children:n.spk.map(s=>e.jsx("div",{className:"card mb-3",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title mb-2",children:s.spk_no}),e.jsxs("div",{className:"row g-2",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:"Buyer"}),e.jsx("div",{children:s.buyer})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:"Status"}),e.jsx("div",{children:s.status?e.jsx(M,{status:s.status.toLowerCase()}):"-"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:"SPK Date"}),e.jsx("div",{children:T(s.spk_date)})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:"Deadline"}),e.jsx("div",{children:T(s.deadline)})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("small",{className:"text-muted",children:"Notes"}),e.jsx("div",{children:s.notes||"-"})]})]})]})},s.id))}),e.jsx("div",{className:"d-none d-md-block",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table align-middle table-row-dashed fs-6 gy-5",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-start text-muted fw-bold fs-7 text-uppercase gs-0",children:[e.jsx("th",{className:"min-w-175px",children:"SPK No"}),e.jsx("th",{className:"min-w-150px",children:"Buyer"}),e.jsx("th",{className:"min-w-125px",children:"SPK Date"}),e.jsx("th",{className:"min-w-125px",children:"Deadline"}),e.jsx("th",{className:"min-w-125px",children:"Status"}),e.jsx("th",{className:"min-w-200px",children:"Notes"})]})}),e.jsx("tbody",{className:"text-gray-600 fw-semibold",children:n.spk.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.spk_no}),e.jsx("td",{children:s.buyer}),e.jsx("td",{children:T(s.spk_date)}),e.jsx("td",{children:T(s.deadline)}),e.jsx("td",{children:s.status?e.jsx(M,{status:s.status.toLowerCase()}):"-"}),e.jsx("td",{children:s.notes||"-"})]},s.id))})]})})})]})]}),n.spk_details&&n.spk_details.length>0&&e.jsxs("div",{className:"card mt-5",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"card-title",children:"SPK Details"})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"d-block d-md-none",children:n.spk_details.map(s=>{var c,v,y,N,A;return e.jsx("div",{className:"card mb-3",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h6",{className:"card-title mb-2",children:((c=s.product_variants)==null?void 0:c.product_name)||"-"}),e.jsxs("div",{className:"row g-2",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:"SKU"}),e.jsx("div",{children:((v=s.product_variants)==null?void 0:v.sku)||"-"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:"Barcode"}),e.jsx("div",{children:((y=s.product_variants)==null?void 0:y.barcode)||s.barcode||"-"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:"Size"}),e.jsx("div",{children:((N=s.product_variants)==null?void 0:N.size)||"-"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:"Color"}),e.jsx("div",{children:((A=s.product_variants)==null?void 0:A.color)||"-"})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:"Qty Order"}),e.jsx("div",{children:s.qty_order})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:"Qty Done"}),e.jsx("div",{children:s.qty_done})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:"Qty Reject"}),e.jsx("div",{children:s.qty_reject})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("small",{className:"text-muted",children:"Progress"}),e.jsx("div",{children:s.progress})]}),e.jsxs("div",{className:"col-12",children:[e.jsx("small",{className:"text-muted",children:"Status"}),s.status?e.jsx(M,{status:s.status.toLowerCase()}):"-"]}),e.jsxs("div",{className:"col-12",children:[e.jsx("small",{className:"text-muted",children:"Cost Price"}),e.jsx("div",{children:L(s.cost_price)})]})]})]})},s.id)})}),e.jsx("div",{className:"d-none d-md-block",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table align-middle table-row-dashed fs-6 gy-5",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-start text-muted fw-bold fs-7 text-uppercase gs-0",children:[e.jsx("th",{className:"min-w-200px",children:"Product"}),e.jsx("th",{className:"min-w-100px",children:"SKU"}),e.jsx("th",{className:"min-w-120px",children:"Barcode"}),e.jsx("th",{className:"min-w-80px",children:"Size"}),e.jsx("th",{className:"min-w-80px",children:"Color"}),e.jsx("th",{className:"min-w-80px",children:"Qty Order"}),e.jsx("th",{className:"min-w-80px",children:"Qty Done"}),e.jsx("th",{className:"min-w-80px",children:"Qty Reject"}),e.jsx("th",{className:"min-w-80px",children:"Progress"}),e.jsx("th",{className:"min-w-100px",children:"Status"}),e.jsx("th",{className:"min-w-120px",children:"Cost Price"})]})}),e.jsx("tbody",{className:"text-gray-600 fw-semibold",children:n.spk_details.map(s=>{var c,v,y,N,A;return e.jsxs("tr",{children:[e.jsx("td",{children:((c=s.product_variants)==null?void 0:c.product_name)||"-"}),e.jsx("td",{children:((v=s.product_variants)==null?void 0:v.sku)||"-"}),e.jsx("td",{children:((y=s.product_variants)==null?void 0:y.barcode)||s.barcode||"-"}),e.jsx("td",{children:((N=s.product_variants)==null?void 0:N.size)||"-"}),e.jsx("td",{children:((A=s.product_variants)==null?void 0:A.color)||"-"}),e.jsx("td",{children:s.qty_order}),e.jsx("td",{children:s.qty_done}),e.jsx("td",{children:s.qty_reject}),e.jsx("td",{children:s.progress}),e.jsx("td",{children:s.status?e.jsx(M,{status:s.status.toLowerCase()}):"-"}),e.jsx("td",{children:L(s.cost_price)})]},s.id)})})]})})})]})]})]}):e.jsx(B,{children:e.jsx("div",{className:"alert alert-warning",children:"Delivery note not found."})}):e.jsx(B,{children:e.jsx("div",{className:"alert alert-warning",children:"Delivery note ID is required."})})},Ve=[{title:"Surat Jalan",path:"/production/surat-jalan",isSeparator:!1,isActive:!1}],et=()=>{const{id:i}=he();return e.jsxs(e.Fragment,{children:[e.jsx(J,{breadcrumbs:Ve,children:"Delivery Note Detail"}),e.jsx(Xe,{deliveryNoteId:i})]})},tt=()=>e.jsx(me,{children:e.jsxs(C,{element:e.jsx(e.Fragment,{children:e.jsx(ye,{})}),children:[e.jsx(C,{path:"detail/:id",element:e.jsx(et,{})}),e.jsx(C,{index:!0,element:e.jsx(ue,{to:"/production/surat-jalan"})})]})}),F=[{title:"Produksi > ",path:"/production/",isSeparator:!1,isActive:!1}],mt=()=>e.jsx(me,{children:e.jsxs(C,{element:e.jsx(ye,{}),children:[e.jsx(C,{path:"surat-jalan",element:e.jsxs(e.Fragment,{children:[e.jsx(J,{breadcrumbs:F,children:"Surat Jalan"}),e.jsx(Fe,{})]})}),e.jsx(C,{path:"add-surat-jalan",element:e.jsxs(e.Fragment,{children:[e.jsx(J,{breadcrumbs:F,children:"Add Surat Jalan"}),e.jsx(Ze,{})]})}),e.jsx(C,{path:"edit-surat-jalan/:id",element:e.jsxs(e.Fragment,{children:[e.jsx(J,{breadcrumbs:F,children:"Update Surat Jalan"}),e.jsx(Ye,{})]})}),e.jsx(C,{path:"delivery-note-detail/*",element:e.jsx(tt,{})}),e.jsx(C,{index:!0,element:e.jsx(ue,{to:"/production/dashboard"})})]})});export{mt as default};
