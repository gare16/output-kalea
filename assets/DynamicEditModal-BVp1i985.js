import{r as d,j as a,K as l}from"./index-BXdnQbB_.js";import{M as t}from"./Modal-D2BAKrmG.js";import{B as p,F as c}from"./dateFormatter-CGxZEcZP.js";import{I as b}from"./TablesWidget13-CqfjLc2n.js";const T=({show:k,title:C,fields:j,initialData:u,onSave:E,onClose:m})=>{const[i,h]=d.useState({}),[g,x]=d.useState({});d.useEffect(()=>{h(u),x({})},[u]);const F=()=>{const e={};return j.forEach(s=>{var r;s.required&&!((r=i[s.name])!=null&&r.toString().trim())&&(e[s.name]=`${s.label} is required.`)}),e},y=()=>{const e=F();if(Object.keys(e).length>0){x(e);return}E(i)},o=(e,s)=>{h(r=>({...r,[e]:s})),g[e]&&x(r=>({...r,[e]:""}))},I=e=>{var v;const s=i[e.name]||"",r=g[e.name];return a.jsxs(c.Group,{className:"mb-4",children:[a.jsx(c.Label,{className:"fw-bold",children:e.label}),a.jsxs(b,{children:[e.icon&&e.type!=="checkbox"&&a.jsx(b.Text,{children:a.jsx(l,{iconName:e.icon,className:"fs-3"})}),e.type==="select"?a.jsx(c.Select,{value:s,onChange:n=>{const N=n.target.value;o(e.name,N),e.onChange&&e.onChange(N,{setFieldValue:(S,w)=>h(D=>({...D,[S]:w}))})},isInvalid:!!r,className:"form-control-solid",disabled:e.readonly,children:(v=e.options)==null?void 0:v.map(n=>a.jsx("option",{value:n.value,children:n.label},n.value))}):e.type==="textarea"?a.jsx(c.Control,{as:"textarea",rows:3,placeholder:e.placeholder,value:s,onChange:n=>o(e.name,n.target.value),isInvalid:!!r,className:"form-control-solid",readOnly:e.readonly}):e.type==="checkbox"?a.jsx("div",{className:"form-check form-check-custom form-check-solid form-switch mb-2",children:a.jsx("input",{type:"checkbox",id:e.name,checked:s,onChange:n=>o(e.name,n.target.checked),className:"form-check-input",readOnly:e.readonly})}):a.jsx(c.Control,{type:e.type,placeholder:e.placeholder,value:s,onChange:n=>o(e.name,n.target.value),isInvalid:!!r,className:"form-control-solid",readOnly:e.readonly}),a.jsx(c.Control.Feedback,{type:"invalid",children:r})]})]},e.name)};return a.jsxs(t,{show:k,onHide:m,centered:!0,size:"lg",backdrop:"static",className:"fade-in",children:[a.jsxs(t.Header,{className:"bg-light",children:[a.jsxs(t.Title,{className:"d-flex align-items-center",children:[a.jsx(l,{iconName:"pencil",className:"fs-2 me-3 text-primary"}),C]}),a.jsx(p,{variant:"link",className:"btn-close",onClick:m})]}),a.jsx(t.Body,{className:"p-5",children:a.jsx(c,{onKeyDown:e=>{e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),y())},children:j.map(I)})}),a.jsxs(t.Footer,{className:"bg-light",children:[a.jsxs(p,{variant:"light",className:"btn-active-light-danger",onClick:m,children:[a.jsx(l,{iconName:"cross",className:"fs-2 me-2"}),"Cancel"]}),a.jsxs(p,{variant:"primary",onClick:y,children:[a.jsx(l,{iconName:"check",className:"fs-2 me-2"}),"Save Changes"]})]})]})};export{T as D};
