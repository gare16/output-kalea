import{W as pe,B as J,J as se,G as D,I as B}from"./index-ByLk8s-j.js";import{u as ae,a as X}from"./useMutation-D8PU-YPJ.js";var z={exports:{}},he=z.exports,ne;function fe(){return ne||(ne=1,(function(n,l){(function(c,v){n.exports=v(pe())})(typeof self<"u"?self:he,function(c){return(function(){var v={155:function(e){e.exports=c}},M={};function q(e){var t=M[e];if(t!==void 0)return t.exports;var s=M[e]={exports:{}};return v[e](s,s.exports,q),s.exports}q.d=function(e,t){for(var s in t)q.o(t,s)&&!q.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},q.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},q.r=function(e){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var V={};q.r(V),q.d(V,{useReactToPrint:function(){return de}});var ie=q(155);const Z="printWindow";function m({level:e="error",messages:t,suppressErrors:s=!1}){s||(e==="error"?console.error(t):e==="warning"?console.warn(t):console.debug(t))}function ee(e,t){if(t||!e){const s=document.getElementById(Z);s&&document.body.removeChild(s)}}function Q(e){return e instanceof Error?e:new Error("Unknown Error")}function te(e,t){const{documentTitle:s,onAfterPrint:p,onPrintError:w,preserveAfterPrint:b,print:P,suppressErrors:E}=t;setTimeout(()=>{var h,y;if(e.contentWindow){let R=function(){p==null||p(),ee(b)};if(e.contentWindow.focus(),P)P(e).then(R).catch(S=>{w?w("print",Q(S)):m({messages:["An error was thrown by the specified `print` function"],suppressErrors:E})});else{if(e.contentWindow.print){const S=(y=(h=e.contentDocument)===null||h===void 0?void 0:h.title)!==null&&y!==void 0?y:"",x=e.ownerDocument.title;s&&(e.ownerDocument.title=s,e.contentDocument&&(e.contentDocument.title=s)),e.contentWindow.print(),s&&(e.ownerDocument.title=x,e.contentDocument&&(e.contentDocument.title=S))}else m({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:E});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(S=>{var x,W;return((W=(x=navigator.userAgent)!==null&&x!==void 0?x:navigator.vendor)!==null&&W!==void 0?W:"opera"in window&&window.opera).match(S)})?setTimeout(R,500):R()}}else m({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:E})},500)}function oe(e){const t=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);let p=s.nextNode();for(;p;)t.push(p),p=s.nextNode();return t}function re(e,t,s){const p=oe(e),w=oe(t);if(p.length===w.length)for(let b=0;b<p.length;b++){const P=p[b],E=w[b],h=P.shadowRoot;if(h!==null){const y=E.attachShadow({mode:h.mode});y.innerHTML=h.innerHTML,re(h,y,s)}}else m({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",e,t],suppressErrors:s})}const le=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function ce(e,t,s,p){var w,b,P,E,h;const{contentNode:y,clonedContentNode:R,clonedImgNodes:S,clonedVideoNodes:x,numResourcesToLoad:W,originalCanvasNodes:$}=s,{bodyClass:Y,fonts:H,ignoreGlobalStyles:G,pageStyle:L,nonce:C,suppressErrors:_,copyShadowRoots:U}=p;e.onload=null;const r=(w=e.contentDocument)!==null&&w!==void 0?w:(b=e.contentWindow)===null||b===void 0?void 0:b.document;if(r){const u=r.body.appendChild(R);U&&re(y,u,!!_),H&&(!((P=e.contentDocument)===null||P===void 0)&&P.fonts&&(!((E=e.contentWindow)===null||E===void 0)&&E.FontFace)?H.forEach(a=>{const o=new FontFace(a.family,a.source,{weight:a.weight,style:a.style});e.contentDocument.fonts.add(o),o.loaded.then(()=>{t(o)}).catch(f=>{t(o,["Failed loading the font:",o,"Load error:",Q(f)])})}):(H.forEach(a=>{t(a)}),m({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:_})));const j=L??le,T=r.createElement("style");C&&(T.setAttribute("nonce",C),r.head.setAttribute("nonce",C)),T.appendChild(r.createTextNode(j)),r.head.appendChild(T),Y&&r.body.classList.add(...Y.split(" "));const I=r.querySelectorAll("canvas");for(let a=0;a<$.length;++a){const o=$[a],f=I[a];if(f===void 0){m({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",o],suppressErrors:_});continue}const i=f.getContext("2d");i&&i.drawImage(o,0,0)}for(let a=0;a<S.length;a++){const o=S[a],f=o.getAttribute("src");if(f){const i=new Image;i.onload=()=>{t(o)},i.onerror=(d,g,F,A,N)=>{t(o,["Error loading <img>",o,"Error",N])},i.src=f}else t(o,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',o])}for(let a=0;a<x.length;a++){const o=x[a];o.preload="auto";const f=o.getAttribute("poster");if(f){const i=new Image;i.onload=()=>{t(o)},i.onerror=(d,g,F,A,N)=>{t(o,["Error loading video poster",f,"for video",o,"Error:",N])},i.src=f}else o.readyState>=2?t(o):o.src?(o.onloadeddata=()=>{t(o)},o.onerror=(i,d,g,F,A)=>{t(o,["Error loading video",o,"Error",A])},o.onstalled=()=>{t(o,["Loading video stalled, skipping",o])}):t(o,["Error loading video, `src` is empty",o])}const O="select",k=y.querySelectorAll(O),K=r.querySelectorAll(O);for(let a=0;a<k.length;a++)K[a].value=k[a].value;if(!G){const a=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let o=0,f=a.length;o<f;++o){const i=a[o];if(i.tagName.toLowerCase()==="style"){const d=r.createElement(i.tagName),g=i.sheet;if(g){let F="";try{const A=g.cssRules.length;for(let N=0;N<A;++N)typeof g.cssRules[N].cssText=="string"&&(F+=`${g.cssRules[N].cssText}\r
`)}catch(A){m({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",i,`Original error: ${Q(A).message}`],level:"warning"})}d.setAttribute("id",`react-to-print-${o}`),C&&d.setAttribute("nonce",C),d.appendChild(r.createTextNode(F)),r.head.appendChild(d)}}else if(i.getAttribute("href"))if(i.hasAttribute("disabled"))m({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",i],level:"warning"}),t(i);else{const d=r.createElement(i.tagName);for(let g=0,F=i.attributes.length;g<F;++g){const A=i.attributes[g];A&&d.setAttribute(A.nodeName,(h=A.nodeValue)!==null&&h!==void 0?h:"")}d.onload=()=>{t(d)},d.onerror=(g,F,A,N,ue)=>{t(d,["Failed to load",d,"Error:",ue])},C&&d.setAttribute("nonce",C),r.head.appendChild(d)}else m({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",i],level:"warning"}),t(i)}}}W===0&&te(e,p)}function de({bodyClass:e,contentRef:t,copyShadowRoots:s,documentTitle:p,fonts:w,ignoreGlobalStyles:b,nonce:P,onAfterPrint:E,onBeforePrint:h,onPrintError:y,pageStyle:R,preserveAfterPrint:S,print:x,printIframeProps:W,suppressErrors:$}){return(0,ie.useCallback)(H=>{function G(){const L={bodyClass:e,contentRef:t,copyShadowRoots:s,documentTitle:p,fonts:w,ignoreGlobalStyles:b,nonce:P,onAfterPrint:E,onPrintError:y,pageStyle:R,preserveAfterPrint:S,print:x,suppressErrors:$},C=(function(r){const u=document.createElement("iframe");return u.width=`${document.documentElement.clientWidth}px`,u.height=`${document.documentElement.clientHeight}px`,u.style.position="absolute",u.style.top=`-${document.documentElement.clientHeight+100}px`,u.style.left=`-${document.documentElement.clientWidth+100}px`,u.id=Z,u.srcdoc="<!DOCTYPE html>",r&&(r.allow&&(u.allow=r.allow),r.referrerPolicy!==void 0&&(u.referrerPolicy=r.referrerPolicy),r.sandbox!==void 0&&(u.sandbox=r.sandbox)),u})(W),_=(function(r,u){const{contentRef:j,fonts:T,ignoreGlobalStyles:I,suppressErrors:O}=u,k=(function({contentRef:d,optionalContent:g,suppressErrors:F}){return g&&typeof g=="function"?(d&&m({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),g()):d?d.current:void m({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:F})})({contentRef:j,optionalContent:r,suppressErrors:O});if(!k)return;const K=k.cloneNode(!0),a=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),o=K.querySelectorAll("img"),f=K.querySelectorAll("video"),i=T?T.length:0;return{contentNode:k,clonedContentNode:K,clonedImgNodes:o,clonedVideoNodes:f,numResourcesToLoad:(I?0:a.length)+o.length+f.length+i,originalCanvasNodes:k.querySelectorAll("canvas")}})(H,L);if(!_)return void m({messages:["There is nothing to print"],suppressErrors:$});const U=(function(r,u,j){const{suppressErrors:T}=r,I=[],O=[];return function(k,K){I.includes(k)?m({level:"debug",messages:["Tried to mark a resource that has already been handled",k],suppressErrors:T}):(K?(m({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...K],suppressErrors:T}),O.push(k)):I.push(k),I.length+O.length===u&&te(j,r))}})(L,_.numResourcesToLoad,C);(function(r,u,j,T){r.onload=()=>{ce(r,u,j,T)},document.body.appendChild(r)})(C,U,_,L)}ee(S,!0),h?h().then(()=>{G()}).catch(L=>{y==null||y("onBeforePrint",Q(L))}):G()},[e,t,s,p,w,b,P,E,h,y,R,S,x,$])}return V})()})})(z)),z.exports}var ve=fe();const ge=n=>{switch(n.toLowerCase().trim()){case"draft":case"draf":return"draft";case"approved":case"disetujui":case"di setujui":return"approved";case"on going":case"ongoing":case"sedang berjalan":case"proses":case"processing":return"in_progress";case"done":case"selesai":return"done";default:return"draft"}},me=n=>{const l=ge(n.status),c=n.status_badge?n.status_badge:l==="approved"?"success":l==="in_progress"?"warning":l==="done"?"primary":"secondary";return{id:n.id,noSpk:n.spk_no,buyer:n.buyer,spkDate:n.spk_date,deadline:n.deadline,status:l,status_label:n.status,status_badge:c,progress:n.progress||""}},we=()=>ae({queryKey:["spkList"],queryFn:async()=>{const n=await B.get("/spk?start=0&length=100");if(n.data.success)return n.data.data.map(me);throw new Error("Failed to fetch SPK data")}}),Ee=()=>{const n=J();return X({mutationFn:async l=>{const c=await B.post("/spk",l);if(!c.data.success)throw new Error("Failed to add SPK");return c.data},onSuccess:()=>{n.invalidateQueries({queryKey:["spkList"]}),n.invalidateQueries({queryKey:["spkDetail"]}),D.success("SPK berhasil ditambahkan")},onError:l=>{var v;const c=l instanceof se?(v=l.response)==null?void 0:v.data.message:"Failed to add SPK";Array.isArray(c)?c.forEach(M=>D.error(M)):D.error(c)}})},Se=()=>{const n=J();return X({mutationFn:async({id:l,data:c})=>{const v=await B.put(`/spk/${l}`,c);if(!v.data.success)throw new Error("Failed to update SPK");return v.data},onSuccess:(l,{id:c})=>{n.invalidateQueries({queryKey:["spkList"]}),n.invalidateQueries({queryKey:["spkDetail",c]}),D.success("SPK berhasil diperbarui")},onError:l=>{D.error(l instanceof Error?l.message:"Failed to update SPK")}})},ke=()=>ae({queryKey:["generateSpkNo"],queryFn:async()=>{const n=await B.get("/spk/generate-no");if(n.data.success)return n.data.data.spk_no;throw new Error("Failed to generate SPK number")}}),Ae=()=>{const n=J();return X({mutationFn:async l=>{const c=await B.put(`/spk/${l.id}/approval`,{status:l.status,user_id:l.user_id});if(!c.data.success)throw new Error("Failed to approve SPK");return c.data},onSuccess:(l,{id:c})=>{n.invalidateQueries({queryKey:["spkList"]}),n.invalidateQueries({queryKey:["spkDetail",c]}),D.success("SPK berhasil disetujui")},onError:l=>{var v;const c=l instanceof se?(v=l.response)==null?void 0:v.data.message:"Failed to approve SPK";Array.isArray(c)?c.forEach(M=>D.error(M)):D.error(c)}})};export{ke as a,Ee as b,Se as c,Ae as d,ve as l,ge as m,we as u};
