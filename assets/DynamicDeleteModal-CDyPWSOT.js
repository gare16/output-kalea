import{w as g,ab as v,x as k,a8 as C,ac as w,B as F,j as a,K as t,y as S,F as d,v as $}from"./index-BjAtIk4l.js";import{M as r}from"./Modal-DBranIac.js";import{B as m,F as o}from"./dateFormatter-5y5bkUO_.js";import{I as p}from"./TablesWidget13-Jq8083Of.js";const M=({show:j,title:u,fields:i,initialValues:h={},onSubmit:c,onClose:x})=>{const N=g().shape(i.reduce((s,e)=>{let n=v();return e.type==="text"||e.type==="textarea"||e.type==="select"?n=k():e.type==="number"?n=C():e.type==="date"?n=w():e.type==="checkbox"&&(n=F()),e.required&&(n=n.required(`${e.label} is required`)),s[e.name]=n,s},{})),y=i.reduce((s,e)=>(e.name in h?s[e.name]=h[e.name]:e.type==="number"?s[e.name]=0:e.type==="date"?s[e.name]="":e.type==="checkbox"?s[e.name]=!0:s[e.name]="",s),{...h});return a.jsxs(r,{show:j,onHide:x,centered:!0,size:"lg",backdrop:"static",className:"fade-in",children:[a.jsxs(r.Header,{className:"bg-light",children:[a.jsxs(r.Title,{className:"d-flex align-items-center",children:[a.jsx(t,{iconName:"plus",className:"fs-2 me-3 text-primary"}),u]}),a.jsx(m,{variant:"link",className:"btn-close",onClick:x})]}),a.jsx(r.Body,{className:"p-5",children:a.jsx(S,{initialValues:y,validationSchema:N,onSubmit:s=>{console.log("Formik onSubmit called with:",s),c(s)},enableReinitialize:!0,children:s=>a.jsx(o,{onSubmit:s.handleSubmit,id:"dynamic-form",onKeyDown:e=>{e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),s.handleSubmit())},children:i.map(e=>a.jsxs(o.Group,{className:"mb-4",children:[a.jsxs(o.Label,{className:"fw-bold",children:[e.label,e.required&&a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsxs(p,{children:[e.icon&&e.type!=="checkbox"&&a.jsx(p.Text,{children:a.jsx(t,{iconName:e.icon,className:"fs-3"})}),e.type==="textarea"?a.jsx(d,{name:e.name,children:n=>a.jsx(o.Control,{as:"textarea",rows:3,placeholder:e.placeholder?e.placeholder:`Enter ${e.label.toLowerCase()}`,...n.field,isInvalid:!!(s.errors[e.name]&&s.touched[e.name]),className:"form-control-solid",readOnly:e.readonly})}):e.type==="select"?a.jsx(d,{name:e.name,children:n=>{var b;return a.jsxs(o.Select,{...n.field,onChange:l=>{n.field.onChange(l),e.onChange&&e.onChange(l.target.value,s)},isInvalid:!!(s.errors[e.name]&&s.touched[e.name]),className:"form-control-solid",disabled:e.readonly,children:[a.jsxs("option",{value:"",children:["Select ",e.label.toLowerCase()]}),(b=e.options)==null?void 0:b.map(l=>a.jsx("option",{value:l.value,children:l.label},l.value))]})}}):e.type==="checkbox"?a.jsx("div",{className:"d-flex align-items-center",children:a.jsx(d,{name:e.name,children:n=>a.jsx("div",{className:"form-check form-check-custom form-check-solid form-switch mb-2",children:a.jsx("input",{id:e.name,className:"form-check-input",type:"checkbox",name:n.field.name,checked:n.field.value,onBlur:n.field.onBlur,onChange:n.field.onChange,readOnly:e.readonly})})})}):a.jsx(d,{name:e.name,children:n=>a.jsx(o.Control,{type:e.type,placeholder:e.placeholder?e.placeholder:`Enter ${e.label.toLowerCase()}`,...n.field,isInvalid:!!(s.errors[e.name]&&s.touched[e.name]),className:"form-control-solid",readOnly:e.readonly??!1})}),a.jsx($,{name:e.name,component:"div",className:"invalid-feedback d-block"})]})]},e.name))})})}),a.jsxs(r.Footer,{className:"bg-light",children:[a.jsxs(m,{variant:"light",className:"btn-active-light-danger",onClick:x,children:[a.jsx(t,{iconName:"cross",className:"fs-2 me-2"}),"Cancel"]}),a.jsxs(m,{variant:"primary",type:"submit",form:"dynamic-form",children:[a.jsx(t,{iconName:"check",className:"fs-2 me-2"}),"Save"]})]})]})},T=({show:j,title:u,itemName:i,onConfirm:h,onClose:c})=>{const x=()=>{h(),c()};return a.jsxs(r,{show:j,onHide:c,centered:!0,backdrop:"static",className:"fade-in",children:[a.jsxs(r.Header,{className:"bg-light",children:[a.jsxs(r.Title,{className:"d-flex align-items-center",children:[a.jsx(t,{iconName:"trash",className:"fs-2 me-3 text-danger"}),u]}),a.jsx(m,{variant:"link",className:"btn-close",onClick:c})]}),a.jsxs(r.Body,{className:"p-5 text-center",children:[a.jsx(t,{iconName:"warning",className:"fs-3x text-warning mb-5"}),a.jsx("h4",{className:"mb-3",children:"Are you sure?"}),a.jsxs("p",{className:"text-muted fs-5",children:["You are about to delete ",a.jsxs("strong",{children:['"',i,'"']}),". This action cannot be undone."]})]}),a.jsxs(r.Footer,{className:"bg-light",children:[a.jsxs(m,{variant:"light",className:"btn-active-light-primary",onClick:c,children:[a.jsx(t,{iconName:"cross",className:"fs-2 me-2"}),"Cancel"]}),a.jsxs(m,{variant:"danger",onClick:x,children:[a.jsx(t,{iconName:"trash",className:"fs-2 me-2"}),"Delete"]})]})]})};export{T as D,M as a};
