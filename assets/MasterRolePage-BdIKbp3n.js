import{r as o,S as k,j as a,H as u,P as v}from"./index-ByLk8s-j.js";import{T as E}from"./TablesWidget13-CYdTlftt.js";import{D as T}from"./DynamicEditModal-Bhzcpj13.js";import{D as C}from"./DynamicDeleteModal-C1L8R17p.js";import{D as P}from"./DynamicFormModal-BoHJvk0i.js";import{u as q}from"./useRoles-C7e91FBu.js";import{f as p}from"./dateFormatter-Bb4_azhc.js";import"./ThemeProvider-DRjQDZAD.js";import"./FormCheckInput-DWF_ryow.js";import"./Modal-DB3yoVLU.js";import"./hasClass-BOwTM1yB.js";import"./DataKey-jIVlRIQi.js";import"./Button-BI5PMaMy.js";import"./Form-BFxoF8LL.js";import"./warning-C3dqfjue.js";import"./useMutation-D8PU-YPJ.js";const F=[{title:"Dashboard",path:"/dashboard",isSeparator:!1,isActive:!1},{title:"Master Role",path:"/master-role",isSeparator:!0,isActive:!0}],U=()=>{const{roles:i,isLoading:f,addRole:b,updateRole:x,deleteRole:y}=q(),[h,n]=o.useState(!1),[D,r]=o.useState(!1),[R,m]=o.useState(!1),[t,l]=o.useState(null),{currentUser:s}=k(),_=[{key:"name",label:"Nama Role",className:"min-w-150px"},{key:"created_by",label:"Dibuat Oleh",className:"min-w-120px"},{key:"created_dt",label:"Dibuat Tanggal",className:"min-w-140px"},{key:"changed_by",label:"Diubah Oleh",className:"min-w-120px"},{key:"changed_dt",label:"Diubah Tanggal",className:"min-w-140px"}],g=i.map(e=>({id:e.id,name:e.name,created_by:e.created_by,created_dt:p(e.created_dt),changed_by:e.changed_by||"-",changed_dt:e.changed_dt?p(e.changed_dt):"-"})),N=()=>{n(!0)},w=e=>{b({name:e.name,user_id:s==null?void 0:s.full_name}),n(!1)},S=e=>{const d=i.find(c=>c.id===e.id);d&&(l(d),r(!0))},j=e=>{t&&(x({id:t.id,role:{name:e.name,user_id:s==null?void 0:s.full_name}}),r(!1),l(null))},M=e=>{const d=i.find(c=>c.id===e.id);d&&(l(d),m(!0))},A=()=>{t&&(y(t.id),m(!1),l(null))};return f?a.jsx(u,{children:a.jsxs("div",{className:"card-body text-center py-10",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("div",{className:"mt-3",children:"Memuat data role..."})]})}):a.jsxs("div",{className:"container-fluid",children:[a.jsx(v,{breadcrumbs:F,children:"Master Role"}),a.jsx(u,{children:a.jsx(E,{className:"card-xl-stretch",rows:g,columns:_,labelAdd:"Add Role",filters:[{key:"name",label:"Filter by Name"}],onDelete:M,onEdit:S,onAdd:N})}),h&&a.jsx(P,{show:h,title:"Tambah Role",fields:[{name:"name",label:"Nama Role",type:"text",required:!0,icon:"shield",placeholder:"Masukkan nama role"}],onSubmit:w,onClose:()=>n(!1)}),t&&a.jsx(T,{show:D,title:"Edit Role",fields:[{name:"name",label:"Nama Role",type:"text",required:!0,icon:"shield"}],initialData:{name:t.name},onSave:j,onClose:()=>{r(!1),l(null)}}),t&&a.jsx(C,{show:R,title:"Hapus Role",itemName:t.name,onConfirm:A,onClose:()=>{m(!1),l(null)}})]})};export{U as default};
