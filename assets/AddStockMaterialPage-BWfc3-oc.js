import{Q as B,r as n,Y as R,j as e,P as E,C as F,K as o}from"./index-ByLk8s-j.js";import{u as L}from"./useMaterials-CtTrU3Ez.js";import{u as O}from"./useVendors-DQsuMumR.js";import"./useMutation-D8PU-YPJ.js";const H=[{title:"Inventory",path:"/inventory",isSeparator:!1,isActive:!1},{title:"Stock Material",path:"/inventory/stock-material",isSeparator:!1,isActive:!1},{title:"Add Stock",path:"/inventory/stock-material/add",isSeparator:!0,isActive:!0}],z=()=>{const h=B(),{materials:b}=L(),{vendors:x}=O(),[j,C]=n.useState(""),[p,N]=n.useState(""),[v,I]=n.useState(""),[f,q]=n.useState(""),[g,w]=n.useState(""),[y,P]=n.useState(""),[S,T]=n.useState(""),[l,i]=n.useState([{id:"1",material_id:"",qty:"",unit:"",price:"",amount:0}]),[k,A]=n.useState(0),V=a=>{C(a);const t=x.find(s=>s.id===a);t&&N(t.address||"")},_=()=>{const a={id:Date.now().toString(),material_id:"",qty:"",unit:"",price:"",amount:0};i([...l,a])},M=a=>{l.length>1&&i(l.filter(t=>t.id!==a))},d=(a,t,s)=>{i(l.map(m=>{if(m.id===a){const r={...m,[t]:s};if(t==="qty"||t==="price"){const c=parseFloat(r.qty)||0,u=parseFloat(r.price)||0;r.amount=c*u}if(t==="material_id"){const c=b.find(u=>u.id===s);c&&(r.unit=c.unit_of_measure)}return r}return m}))};R.useEffect(()=>{const a=l.reduce((t,s)=>t+s.amount,0);A(a)},[l]);const D=()=>{console.log("Submitting stock material:",{vendorId:j,vendorAddress:p,kepada:v,transactionDate:f,transactionNumber:g,cost:y,notes:S,productItems:l,total:k}),h("/inventory/stock-material")},K=()=>{h("/inventory/stock-material")};return e.jsxs(e.Fragment,{children:[e.jsx(E,{breadcrumbs:H,children:"Add Stock Material"}),e.jsx(F,{children:e.jsx("div",{className:"row g-5 g-xl-8",children:e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header border-0 pt-6",children:[e.jsx("div",{className:"card-title",children:e.jsx("h4",{className:"mb-4",children:"Informasi Vendor"})}),e.jsxs("div",{className:"card-toolbar",children:[e.jsxs("button",{type:"button",className:"btn btn-light btn-sm me-2",onClick:K,children:[e.jsx(o,{iconName:"arrow-left",className:"fs-3 me-1"}),"Batal"]}),e.jsxs("button",{type:"button",className:"btn btn-primary btn-sm",onClick:D,children:[e.jsx(o,{iconName:"check",className:"fs-3 me-1"}),"Simpan"]})]})]}),e.jsxs("div",{className:"card-body py-5",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6 mb-4",children:[e.jsx("label",{className:"form-label required",children:"Vendor"}),e.jsxs("select",{className:"form-select",value:j,onChange:a=>V(a.target.value),children:[e.jsx("option",{value:"",children:"Pilih Vendor"}),x.map(a=>e.jsx("option",{value:a.id,children:a.vendor_name},a.id))]})]}),e.jsxs("div",{className:"col-md-6 mb-4",children:[e.jsx("label",{className:"form-label",children:"Alamat Vendor"}),e.jsx("input",{type:"text",className:"form-control",value:p,onChange:a=>N(a.target.value),placeholder:"Alamat vendor"})]}),e.jsxs("div",{className:"col-md-6 mb-4",children:[e.jsx("label",{className:"form-label",children:"Kepada"}),e.jsx("input",{type:"text",className:"form-control",value:v,onChange:a=>I(a.target.value),placeholder:"Kepada"})]}),e.jsxs("div",{className:"col-md-3 mb-4",children:[e.jsx("label",{className:"form-label required",children:"Tanggal Transaksi"}),e.jsx("input",{type:"date",className:"form-control",value:f,onChange:a=>q(a.target.value)})]}),e.jsxs("div",{className:"col-md-3 mb-4",children:[e.jsx("label",{className:"form-label required",children:"No Transaksi"}),e.jsx("input",{type:"text",className:"form-control",value:g,onChange:a=>w(a.target.value),placeholder:"Nomor transaksi"})]}),e.jsxs("div",{className:"col-md-6 mb-4",children:[e.jsx("label",{className:"form-label",children:"Biaya/Beban"}),e.jsx("input",{type:"number",className:"form-control",value:y,onChange:a=>P(a.target.value),placeholder:"Biaya atau beban"})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx("h4",{className:"mb-0",children:"Detail Produk"}),e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:_,children:[e.jsx(o,{iconName:"plus",className:"fs-3 me-1"}),"Tambah Item"]})]}),l.map((a,t)=>e.jsxs("div",{className:"border rounded p-4 mb-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("h5",{children:["Item ",t+1]}),l.length>1&&e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>M(a.id),children:e.jsx(o,{iconName:"trash",className:"fs-3"})})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-3 mb-3",children:[e.jsx("label",{className:"form-label required",children:"Produk"}),e.jsxs("select",{className:"form-select",value:a.material_id,onChange:s=>d(a.id,"material_id",s.target.value),children:[e.jsx("option",{value:"",children:"Pilih Material"}),b.map(s=>e.jsx("option",{value:s.id,children:s.material_name},s.id))]})]}),e.jsxs("div",{className:"col-md-2 mb-3",children:[e.jsx("label",{className:"form-label required",children:"Kuantitas"}),e.jsx("input",{type:"number",className:"form-control",value:a.qty,onChange:s=>d(a.id,"qty",s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"col-md-2 mb-3",children:[e.jsx("label",{className:"form-label",children:"Satuan"}),e.jsx("input",{type:"text",className:"form-control",value:a.unit,readOnly:!0,placeholder:"Satuan"})]}),e.jsxs("div",{className:"col-md-2 mb-3",children:[e.jsx("label",{className:"form-label required",children:"Harga Satuan"}),e.jsx("input",{type:"number",className:"form-control",value:a.price,onChange:s=>d(a.id,"price",s.target.value),placeholder:"0"})]}),e.jsxs("div",{className:"col-md-2 mb-3",children:[e.jsx("label",{className:"form-label",children:"Jumlah"}),e.jsx("input",{type:"text",className:"form-control",value:a.amount>0?`Rp ${a.amount.toLocaleString("id-ID")}`:"",readOnly:!0,placeholder:"0"})]})]})]},a.id))]}),e.jsxs("div",{className:"col-md-12 mb-4",children:[e.jsx("label",{className:"form-label",children:"Catatan"}),e.jsx("textarea",{className:"form-control",value:S,onChange:a=>T(a.target.value),placeholder:"Catatan tambahan",rows:3})]}),e.jsx("div",{className:"border rounded p-4 bg-light",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-6 offset-md-6",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h4",{className:"mb-0",children:"Total:"}),e.jsxs("h4",{className:"mb-0 text-primary",children:["Rp ",k.toLocaleString("id-ID")]})]})})})})]})]})})})})]})};export{z as default};
