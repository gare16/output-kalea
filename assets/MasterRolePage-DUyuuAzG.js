import{r as o,a2 as A,j as a,_ as u,k as v}from"./index-DtLKkDp-.js";import{T as E}from"./TablesWidget13-CnK7FQ9o.js";import{D as T}from"./DynamicEditModal-B3EbgN_l.js";import{D as C}from"./DynamicDeleteModal-Cl6SalVY.js";import{D as q}from"./DynamicFormModal-iRfucUSA.js";import{u as F}from"./useRoles-BmHzP-4H.js";import{f}from"./dateFormatter-Bb4_azhc.js";import"./ThemeProvider-Buy5OdM_.js";import"./Modal-DRjAcmKK.js";import"./hasClass-GO2TYndl.js";import"./Button-DOX5HBoW.js";import"./Form-BDPISyEC.js";import"./warning-DmKywM4p.js";import"./useMutation-Bl9g9XCm.js";const L=[{title:"Dashboard",path:"/dashboard",isSeparator:!1,isActive:!1},{title:"Master Role",path:"/master-role",isSeparator:!0,isActive:!0}],Z=()=>{const{roles:i,isLoading:p,addRole:b,updateRole:x,deleteRole:y}=F(),[h,n]=o.useState(!1),[D,r]=o.useState(!1),[R,m]=o.useState(!1),[t,l]=o.useState(null),{currentUser:s}=A(),_=[{key:"name",label:"Nama Role",className:"min-w-150px"},{key:"created_by",label:"Dibuat Oleh",className:"min-w-120px"},{key:"created_dt",label:"Dibuat Tanggal",className:"min-w-140px"},{key:"changed_by",label:"Diubah Oleh",className:"min-w-120px"},{key:"changed_dt",label:"Diubah Tanggal",className:"min-w-140px"}],g=i.map(e=>({id:e.id,name:e.name,created_by:e.created_by,created_dt:f(e.created_dt),changed_by:e.changed_by||"-",changed_dt:e.changed_dt?f(e.changed_dt):"-"})),N=()=>{n(!0)},w=e=>{b({name:e.name,user_id:s==null?void 0:s.full_name}),n(!1)},j=e=>{const d=i.find(c=>c.id===e.id);d&&(l(d),r(!0))},M=e=>{t&&(x({id:t.id,role:{name:e.name,user_id:s==null?void 0:s.full_name}}),r(!1),l(null))},S=e=>{const d=i.find(c=>c.id===e.id);d&&(l(d),m(!0))},k=()=>{t&&(y(t.id),m(!1),l(null))};return p?a.jsx(u,{children:a.jsxs("div",{className:"card-body text-center py-10",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("div",{className:"mt-3",children:"Memuat data role..."})]})}):a.jsxs("div",{className:"container-fluid",children:[a.jsx(v,{breadcrumbs:L,children:"Master Role"}),a.jsx(u,{children:a.jsx(E,{className:"card-xl-stretch",rows:g,columns:_,labelAdd:"Add Role",filters:[{key:"name",label:"Filter by Name"}],onDelete:S,onEdit:j,onAdd:N})}),h&&a.jsx(q,{show:h,title:"Tambah Role",fields:[{name:"name",label:"Nama Role",type:"text",required:!0,icon:"shield",placeholder:"Masukkan nama role"}],onSubmit:w,onClose:()=>n(!1)}),t&&a.jsx(T,{show:D,title:"Edit Role",fields:[{name:"name",label:"Nama Role",type:"text",required:!0,icon:"shield"}],initialData:{name:t.name},onSave:M,onClose:()=>{r(!1),l(null)}}),t&&a.jsx(C,{show:R,title:"Hapus Role",itemName:t.name,onConfirm:k,onClose:()=>{m(!1),l(null)}})]})};export{Z as default};
