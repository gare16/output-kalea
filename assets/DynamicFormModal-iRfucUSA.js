import{w as v,ac as g,x as k,a9 as C,ad as w,B as S,j as a,K as o,y as $,F as m,v as F}from"./index-DtLKkDp-.js";import{M as c}from"./Modal-DRjAcmKK.js";import{B as x}from"./Button-DOX5HBoW.js";import{F as t}from"./Form-BDPISyEC.js";import{I as u}from"./TablesWidget13-CnK7FQ9o.js";const K=({show:p,title:j,fields:l,initialValues:i={},onSubmit:y,onClose:h})=>{const b=v().shape(l.reduce((s,e)=>{let n=g();return e.type==="text"||e.type==="textarea"||e.type==="select"?n=k():e.type==="number"?n=C():e.type==="date"?n=w():e.type==="checkbox"&&(n=S()),e.required&&(n=n.required(`${e.label} is required`)),s[e.name]=n,s},{})),N=l.reduce((s,e)=>(e.name in i?s[e.name]=i[e.name]:e.type==="number"?s[e.name]=0:e.type==="date"?s[e.name]="":e.type==="checkbox"?s[e.name]=!0:s[e.name]="",s),{...i});return a.jsxs(c,{show:p,onHide:h,centered:!0,size:"lg",backdrop:"static",className:"fade-in",children:[a.jsxs(c.Header,{className:"bg-light",children:[a.jsxs(c.Title,{className:"d-flex align-items-center",children:[a.jsx(o,{iconName:"plus",className:"fs-2 me-3 text-primary"}),j]}),a.jsx(x,{variant:"link",className:"btn-close",onClick:h})]}),a.jsx(c.Body,{className:"p-5",children:a.jsx($,{initialValues:N,validationSchema:b,onSubmit:s=>{console.log("Formik onSubmit called with:",s),y(s)},enableReinitialize:!0,children:s=>a.jsx(t,{onSubmit:s.handleSubmit,id:"dynamic-form",onKeyDown:e=>{e.key==="Enter"&&!e.shiftKey&&(e.preventDefault(),s.handleSubmit())},children:l.map(e=>a.jsxs(t.Group,{className:"mb-4",children:[a.jsxs(t.Label,{className:"fw-bold",children:[e.label,e.required&&a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsxs(u,{children:[e.icon&&e.type!=="checkbox"&&a.jsx(u.Text,{children:a.jsx(o,{iconName:e.icon,className:"fs-3"})}),e.type==="textarea"?a.jsx(m,{name:e.name,children:n=>a.jsx(t.Control,{as:"textarea",rows:3,placeholder:e.placeholder?e.placeholder:`Enter ${e.label.toLowerCase()}`,...n.field,isInvalid:!!(s.errors[e.name]&&s.touched[e.name]),className:"form-control-solid",readOnly:e.readonly})}):e.type==="select"?a.jsx(m,{name:e.name,children:n=>{var d;return a.jsxs(t.Select,{...n.field,onChange:r=>{n.field.onChange(r),e.onChange&&e.onChange(r.target.value,s)},isInvalid:!!(s.errors[e.name]&&s.touched[e.name]),className:"form-control-solid",disabled:e.readonly,children:[a.jsxs("option",{value:"",children:["Select ",e.label.toLowerCase()]}),(d=e.options)==null?void 0:d.map(r=>a.jsx("option",{value:r.value,children:r.label},r.value))]})}}):e.type==="checkbox"?a.jsx("div",{className:"d-flex align-items-center",children:a.jsx(m,{name:e.name,children:n=>a.jsx("div",{className:"form-check form-check-custom form-check-solid form-switch mb-2",children:a.jsx("input",{id:e.name,className:"form-check-input",type:"checkbox",name:n.field.name,checked:n.field.value,onBlur:n.field.onBlur,onChange:n.field.onChange,readOnly:e.readonly})})})}):a.jsx(m,{name:e.name,children:n=>a.jsx(t.Control,{type:e.type,placeholder:e.placeholder?e.placeholder:`Enter ${e.label.toLowerCase()}`,...n.field,isInvalid:!!(s.errors[e.name]&&s.touched[e.name]),className:"form-control-solid",readOnly:e.readonly??!1})}),a.jsx(F,{name:e.name,component:"div",className:"invalid-feedback d-block"})]})]},e.name))})})}),a.jsxs(c.Footer,{className:"bg-light",children:[a.jsxs(x,{variant:"light",className:"btn-active-light-danger",onClick:h,children:[a.jsx(o,{iconName:"cross",className:"fs-2 me-2"}),"Cancel"]}),a.jsxs(x,{variant:"primary",type:"submit",form:"dynamic-form",children:[a.jsx(o,{iconName:"check",className:"fs-2 me-2"}),"Save"]})]})]})};export{K as D};
